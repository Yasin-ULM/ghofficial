<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <!-- '''Plotato Engine license:
        Copyright 2021-2023 Shark in a Hat (shark_in_a_hat@protonmail.com)
        Supported by: Matt, CodE, hinaberg, jehefuco, KryperCreeping,
                  cuckold_yyc, GABRIEL ALFORD, Reld, MrSuicide,
                  Naurd, Mathieu Gouillart, BettyPage, Maximus,
                  Theo_Malt, Alex, Foxy'sFan, Dov D Bush, Overseer,
                  Franatique, mahena, An Anonymous Benefactor, Joe Steel,
                  David Kindler, bsnick, BranVan, Jayjay Fan, lea,
                  helena ho, coni, evilbiscuit, Iroquois Pliskin, Ab,
                  Drunkmilkman, bouncy4u

        Permission to use, copy, modify, and/or distribute this software
        for any purpose with or without fee is hereby granted, provided
        that the above copyright notice and this permission notice
        appear in all copies.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
        WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
        WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL
        THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR
        CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
        NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
        CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

        NOTE: While used by the original game/engine dev, this tool remains unofficial.
              No extra effort has been made to make this editor easy to use or usable for
              anyone else other than the person that made it. The coding is meh, comments
              are few and far between, UI is janky with functionality hidden or unobvious.

              You You want any help with this editor - feel free to arsk, but if You REALLY
              want help - put your money where your mouth is.

        ''' -->
        <!-- "Meta-data" -->
        <meta name="author" content="Shark in a Hat">
        <meta name="copyright" content="Copyright 2021 by Shark in a Hat.">
        <meta name="license" content="ISC license">

        <!-- "Icon, favicon, or shortcut icon, whatever works." -->
        <link rel="shortcut icon" type="image/ico" href="../img/potato.ico">
        <link rel="icon" type="image/ico" href="../img/potato.ico">

        <!-- "Version scheme: MAJOR.MINOR.RELEASE"  -->
        <meta name="version" content="0.0.1">
        <!-- "brython.js is the Python implementation in JavaScript" -->
        <script type="text/javascript" src="../brython/brython.js"></script>
        <script type="text/javascript" src="../brython/brython_modules.js"></script>
        <!-- "These are data containers. If you want to mod the game, add/change/replace data here!" -->
        <script type="text/javascript" src="../data/plot.txt"></script>

        <!-- "Title, you need a title, so here's a title"  -->
        <title> Plotato </title>

        <style>
        @font-face{
            font-family: "fa-solid-900";
            src:url('../font/fa-solid-900.woff2');
            font-display: block;
        }
        *{
            box-sizing:border-box;
        }
        body{
            background-color: rgb(90,90,90);
            overscroll-behavior: contain;
        }
        table{
            border-collapse: collapse;
            min-width: 50%;
            max-width: 90%;
            margin-left: 5%;
        }
        td{
            padding: 60px 6px;
            text-align: center;
        }
        h2{
            text-align: center;
            margin: 5px
        }
        .api_def{
            color: hotpink;
            margin-left: 10px;
        }
        .api_num{
            color: green;
        }
        .api_doc{
            color: yellow;
            margin-left: 40px;
            margin-bottom: 20px;
        }
        .api{
            font-family: monospace;
            font-size: 16px;
            color: gray;
            background: rgb(30,30,30);
        }
        .save_vars {
            padding: 2px;
            border: solid black 1px;
            text-align: left;
            max-width: 30vw;
        }
        .save_vars_row{
            font-family: monospace;
        }
        .save_vars_row:nth-child(odd) {
            background: rgb(230, 230, 230);
        }
        .save_vars_row:nth-child(even) {
            background: white;
        }

        .save_vars_table{
            width:100%;            
            max-width: 98%;
            margin-left: 1%;            
        }

        .fa_icon{
            font-family: fa-solid-900;
            letter-spacing: 4px;
            font-size: 16px;
            color: rgba(20, 20, 20, 0.7);
            cursor: help;
            z-index: 100;
        }
        .fa_icon:hover::after{
            content: attr(data-hint);
            border-radius: 4px;
            border-style: solid;
            border-width: 1px;
            padding: 3px 4px;
            font-size: 13px;
            background: rgb(255, 255, 255);
            white-space: pre-wrap;
            font-family: monospace;
            letter-spacing: normal;
            color: black;
            position: absolute;
            transform: translate(-50%, -120% );
            min-width: 10em;
            z-index: 100;
        }

        .node{
            border-radius: 6px;
            border-style: solid;
            border-width: 4px;
            padding: 3px 4px;
            display: inline-block;
            position: relative;
            background: white;
            overflow-wrap: anywhere;
            font-family: monospace;
            font-weight: bold;
            font-size: 14px;
            opacity: 0.8;
            filter: brightness(0.7) grayscale(0.8);
        }
        .node_selected{
            outline-radius: 4px;
            outline-style: solid;
            outline-width: 1px;
            outline-color: black;
            border-radius: 6px;
            border-style: solid;
            border-width: 4px;
            padding: 3px 4px;
            display: inline-block;
            background: white;
            overflow-wrap: anywhere;
            font-family: monospace;
            font-weight: bold;
            font-size: 14px;
        }
        .node_button{
            font-size: 100%;
            color: rgba(240, 240, 240, 0);
            width: 16px;
            height: 16px;
            background: rgb(230, 230, 230);
            margin-right: 3px;
            border: 1px solid gray;
            border-radius: 50%;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            vertical-align: top;
        }
        .node_button:hover{
            border: 1px solid black;
        }
        .node_button:hover::after{
            content: attr(data-hint);
            border-radius: 4px;
            border-style: solid;
            border-width: 1px;
            padding: 3px 4px;
            background: rgba(255, 255, 255, 0.9);
            white-space: nowrap;
            font-family: 'Arial Narrow', Arial, sans-serif;
            color: black;
            position: absolute;
            transform: translate(-50%, -35px);
        }
        .overflow_node_fields{
            white-space: nowrap;
            overflow-x: auto;
        }
        .side_panel{
            font-size: 100%;
            position: fixed;
            z-index: 9;
            padding: 10px;
            top: 5px;
            left: calc(100vw - 34em);
            border: 1px solid lightgray;
            border-radius: 5px;
            background: rgba(255,255,255, 0.8);
            box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.3);
            max-height: 95%;            
            overflow-y: auto;
            overflow-x: hidden;
            resize: horizontal;         
        }
        .side_panel_header{
            cursor: move;
            background: white;           
            border-radius: 6px;
            border: 1px solid #bcbccc;
            text-align: center;
        }
        .scrollable{
            overflow-y: auto;
            overflow-x: hidden;
            max-height: 50vh;
        }
        .toolbar{
            position: fixed;
            padding: 10px;
            top: 2px;
            left: 4px;
            border-radius: 5px;
            background: rgba(255,255,255, 0.8);
            box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            overflow-x: hidden;
            max-height: 100%;
            resize: horizontal;
        }
        .preview{            
            width: 100%;
            object-fit: scale-down;
        }
        .npc_preview{
            width: 160px;
            height: 360px;
        }
        select{
            font-size: 90%;
        }
        input[type="file"] {
            display: none;
        }
        input[type="text"] {
            margin: 1px 0;
            font-family: monospace, monospace;
        }
        input[type=checkbox] {
            vertical-align: middle;
        }
        label{
            line-height: 1.5;
        }
        textarea{
            vertical-align: middle;
        }
        a {
            line-height: 1.5;
        }
        summary{
            background: rgba(180,180,200, 0.8);
            margin: 2px;
            border-radius: 12px;
            border: 1px solid lightgray;
            padding: 2px 10px;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        .button{
            font-size: 100%;
            display: block;
            color: black;
            background: rgb(210, 210, 230);
            padding: 4px;
            margin: 2px 0;
            border: 1px solid gray;
            border-radius: 2px;
            text-decoration: none;
            text-align: center;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        .button:hover{
            border: 1px solid blue;
        }
        .button:active{
            transform: translate(0, 2px);
        }
        .small_button {
            font-size: 90%;
            display: inline;
            color: black;
            background: rgb(210, 210, 230);
            padding: 1px 10px 3px 10px;
            border: 1px solid gray;
            border-radius: 2px;
            text-decoration: none;
            text-align: center;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        .flex_spacer{
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .svg_div{
            position: absolute;
            z-index: -1;
            filter: drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5))
                    drop-shadow(-1px -1px 1px rgba(0, 0, 0, 0.5));
        }
        .main_table{

        }
        </style>
    </head>

    <body lang="en-US" onload="brython( {debug:0, indexedDB:0} )" onbeforeunload="return stop_on_exit()">
        <script>
        var not_saved = 0;
        function stop_on_exit() {
            if (not_saved == 1)
                {
                return "Wait...";
                }
            }
        </script>
        <form autocomplete="off">
        <div class="svg_div" id="svg_div">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                width="100" height="100" id="main_svg">
                <defs>
                    <marker id='head_darkolivegreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkolivegreen' />
                    </marker>
                    <marker id='dot_darkolivegreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkolivegreen' />
                    </marker>

                    <marker id='head_cadetblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='cadetblue' />
                    </marker>
                    <marker id='dot_cadetblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='cadetblue' />
                    </marker>

                    <marker id='head_chartreuse' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='chartreuse' />
                    </marker>
                    <marker id='dot_chartreuse' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='chartreuse' />
                    </marker>

                    <marker id='head_cyan' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='cyan' />
                    </marker>
                    <marker id='dot_cyan' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='cyan' />
                    </marker>

                    <marker id='head_coral' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='coral' />
                    </marker>
                    <marker id='dot_coral' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='coral' />
                    </marker>

                    <marker id='head_darkmagenta' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkmagenta' />
                    </marker>
                    <marker id='dot_darkmagenta' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkmagenta' />
                    </marker>

                    <marker id='head_mediumseagreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumseagreen' />
                    </marker>
                    <marker id='dot_mediumseagreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumseagreen' />
                    </marker>

                    <marker id='head_purple' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='purple' />
                    </marker>
                    <marker id='dot_purple' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='purple' />
                    </marker>

                    <marker id='head_teal' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='teal' />
                    </marker>
                    <marker id='dot_teal' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='teal' />
                    </marker>

                    <marker id='head_hotpink' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='hotpink' />
                    </marker>
                    <marker id='dot_hotpink' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='hotpink' />
                    </marker>

                    <marker id='head_maroon' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='maroon' />
                    </marker>
                    <marker id='dot_maroon' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='maroon' />
                    </marker>

                    <marker id='head_darkslateblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkslateblue' />
                    </marker>
                    <marker id='dot_darkslateblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkslateblue' />
                    </marker>

                    <marker id='head_darkgreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkgreen' />
                    </marker>
                    <marker id='dot_darkgreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkgreen' />
                    </marker>

                    <marker id='head_mediumblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumblue' />
                    </marker>
                    <marker id='dot_mediumblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumblue' />
                    </marker>

                    <marker id='head_darksalmon' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darksalmon' />
                    </marker>
                    <marker id='dot_darksalmon' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darksalmon' />
                    </marker>

                    <marker id='head_springgreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='springgreen' />
                    </marker>
                    <marker id='dot_springgreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='springgreen' />
                    </marker>

                    <marker id='head_sienna' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='sienna' />
                    </marker>
                    <marker id='dot_sienna' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='sienna' />
                    </marker>

                    <marker id='head_mediumspringgreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumspringgreen' />
                    </marker>
                    <marker id='dot_mediumspringgreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumspringgreen' />
                    </marker>

                    <marker id='head_gold' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='gold' />
                    </marker>
                    <marker id='dot_gold' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='gold' />
                    </marker>

                    <marker id='head_slateblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='slateblue' />
                    </marker>
                    <marker id='dot_slateblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='slateblue' />
                    </marker>

                    <marker id='head_deeppink' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='deeppink' />
                    </marker>
                    <marker id='dot_deeppink' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='deeppink' />
                    </marker>

                    <marker id='head_midnightblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='midnightblue' />
                    </marker>
                    <marker id='dot_midnightblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='midnightblue' />
                    </marker>

                    <marker id='head_indianred' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='indianred' />
                    </marker>
                    <marker id='dot_indianred' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='indianred' />
                    </marker>

                    <marker id='head_darkseagreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkseagreen' />
                    </marker>
                    <marker id='dot_darkseagreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkseagreen' />
                    </marker>

                    <marker id='head_blue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='blue' />
                    </marker>
                    <marker id='dot_blue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='blue' />
                    </marker>

                    <marker id='head_brown' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='brown' />
                    </marker>
                    <marker id='dot_brown' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='brown' />
                    </marker>

                    <marker id='head_mediumorchid' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumorchid' />
                    </marker>
                    <marker id='dot_mediumorchid' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumorchid' />
                    </marker>

                    <marker id='head_darkviolet' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkviolet' />
                    </marker>
                    <marker id='dot_darkviolet' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkviolet' />
                    </marker>

                    <marker id='head_chocolate' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='chocolate' />
                    </marker>
                    <marker id='dot_chocolate' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='chocolate' />
                    </marker>

                    <marker id='head_navy' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='navy' />
                    </marker>
                    <marker id='dot_navy' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='navy' />
                    </marker>

                    <marker id='head_lightsalmon' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='lightsalmon' />
                    </marker>
                    <marker id='dot_lightsalmon' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='lightsalmon' />
                    </marker>

                    <marker id='head_darkturquoise' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkturquoise' />
                    </marker>
                    <marker id='dot_darkturquoise' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkturquoise' />
                    </marker>

                    <marker id='head_darkgoldenrod' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkgoldenrod' />
                    </marker>
                    <marker id='dot_darkgoldenrod' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkgoldenrod' />
                    </marker>

                    <marker id='head_mediumturquoise' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumturquoise' />
                    </marker>
                    <marker id='dot_mediumturquoise' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumturquoise' />
                    </marker>

                    <marker id='head_limegreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='limegreen' />
                    </marker>
                    <marker id='dot_limegreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='limegreen' />
                    </marker>

                    <marker id='head_wheat' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='wheat' />
                    </marker>
                    <marker id='dot_wheat' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='wheat' />
                    </marker>

                    <marker id='head_mediumpurple' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumpurple' />
                    </marker>
                    <marker id='dot_mediumpurple' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumpurple' />
                    </marker>

                    <marker id='head_lightgreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='lightgreen' />
                    </marker>
                    <marker id='dot_lightgreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='lightgreen' />
                    </marker>

                    <marker id='head_green' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='green' />
                    </marker>
                    <marker id='dot_green' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='green' />
                    </marker>

                    <marker id='head_olive' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='olive' />
                    </marker>
                    <marker id='dot_olive' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='olive' />
                    </marker>

                    <marker id='head_greenyellow' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='greenyellow' />
                    </marker>
                    <marker id='dot_greenyellow' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='greenyellow' />
                    </marker>

                    <marker id='head_olivedrab' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='olivedrab' />
                    </marker>
                    <marker id='dot_olivedrab' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='olivedrab' />
                    </marker>

                    <marker id='head_orange' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='orange' />
                    </marker>
                    <marker id='dot_orange' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='orange' />
                    </marker>

                    <marker id='head_forestgreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='forestgreen' />
                    </marker>
                    <marker id='dot_forestgreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='forestgreen' />
                    </marker>

                    <marker id='head_palevioletred' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='palevioletred' />
                    </marker>
                    <marker id='dot_palevioletred' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='palevioletred' />
                    </marker>

                    <marker id='head_darkorchid' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkorchid' />
                    </marker>
                    <marker id='dot_darkorchid' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkorchid' />
                    </marker>

                    <marker id='head_violet' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='violet' />
                    </marker>
                    <marker id='dot_violet' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='violet' />
                    </marker>

                    <marker id='head_salmon' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='salmon' />
                    </marker>
                    <marker id='dot_salmon' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='salmon' />
                    </marker>

                    <marker id='head_darkblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkblue' />
                    </marker>
                    <marker id='dot_darkblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkblue' />
                    </marker>

                    <marker id='head_turquoise' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='turquoise' />
                    </marker>
                    <marker id='dot_turquoise' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='turquoise' />
                    </marker>

                    <marker id='head_mediumvioletred' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumvioletred' />
                    </marker>
                    <marker id='dot_mediumvioletred' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumvioletred' />
                    </marker>

                    <marker id='head_palegreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='palegreen' />
                    </marker>
                    <marker id='dot_palegreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='palegreen' />
                    </marker>

                    <marker id='head_orchid' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='orchid' />
                    </marker>
                    <marker id='dot_orchid' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='orchid' />
                    </marker>

                    <marker id='head_burlywood' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='burlywood' />
                    </marker>
                    <marker id='dot_burlywood' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='burlywood' />
                    </marker>

                    <marker id='head_peru' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='peru' />
                    </marker>
                    <marker id='dot_peru' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='peru' />
                    </marker>

                    <marker id='head_seagreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='seagreen' />
                    </marker>
                    <marker id='dot_seagreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='seagreen' />
                    </marker>

                    <marker id='head_royalblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='royalblue' />
                    </marker>
                    <marker id='dot_royalblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='royalblue' />
                    </marker>

                    <marker id='head_mediumaquamarine' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumaquamarine' />
                    </marker>
                    <marker id='dot_mediumaquamarine' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumaquamarine' />
                    </marker>

                    <marker id='head_indigo' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='indigo' />
                    </marker>
                    <marker id='dot_indigo' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='indigo' />
                    </marker>

                    <marker id='head_lime' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='lime' />
                    </marker>
                    <marker id='dot_lime' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='lime' />
                    </marker>

                    <marker id='head_cornflowerblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='cornflowerblue' />
                    </marker>
                    <marker id='dot_cornflowerblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='cornflowerblue' />
                    </marker>

                    <marker id='head_blueviolet' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='blueviolet' />
                    </marker>
                    <marker id='dot_blueviolet' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='blueviolet' />
                    </marker>

                    <marker id='head_aqua' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='aqua' />
                    </marker>
                    <marker id='dot_aqua' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='aqua' />
                    </marker>

                    <marker id='head_slategray' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='slategray' />
                    </marker>
                    <marker id='dot_slategray' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='slategray' />
                    </marker>

                    <marker id='head_saddlebrown' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='saddlebrown' />
                    </marker>
                    <marker id='dot_saddlebrown' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='saddlebrown' />
                    </marker>

                    <marker id='head_darkorange' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkorange' />
                    </marker>
                    <marker id='dot_darkorange' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkorange' />
                    </marker>

                    <marker id='head_moccasin' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='moccasin' />
                    </marker>
                    <marker id='dot_moccasin' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='moccasin' />
                    </marker>

                    <marker id='head_lawngreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='lawngreen' />
                    </marker>
                    <marker id='dot_lawngreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='lawngreen' />
                    </marker>

                    <marker id='head_deepskyblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='deepskyblue' />
                    </marker>
                    <marker id='dot_deepskyblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='deepskyblue' />
                    </marker>

                    <marker id='head_dodgerblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='dodgerblue' />
                    </marker>
                    <marker id='dot_dodgerblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='dodgerblue' />
                    </marker>

                    <marker id='head_powderblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='powderblue' />
                    </marker>
                    <marker id='dot_powderblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='powderblue' />
                    </marker>

                    <marker id='head_darkcyan' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='darkcyan' />
                    </marker>
                    <marker id='dot_darkcyan' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='darkcyan' />
                    </marker>

                    <marker id='head_steelblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='steelblue' />
                    </marker>
                    <marker id='dot_steelblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='steelblue' />
                    </marker>

                    <marker id='head_tan' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='tan' />
                    </marker>
                    <marker id='dot_tan' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='tan' />
                    </marker>

                    <marker id='head_mediumslateblue' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='mediumslateblue' />
                    </marker>
                    <marker id='dot_mediumslateblue' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='mediumslateblue' />
                    </marker>

                    <marker id='head_sandybrown' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='sandybrown' />
                    </marker>
                    <marker id='dot_sandybrown' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='sandybrown' />
                    </marker>

                    <marker id='head_goldenrod' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='goldenrod' />
                    </marker>
                    <marker id='dot_goldenrod' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='goldenrod' />
                    </marker>

                    <marker id='head_yellowgreen' orient='auto' markerWidth='8' markerHeight='16' refX='0.1' refY='4'>
                        <path d='M0,0 V8 L4,4 Z' fill='yellowgreen' />
                    </marker>
                    <marker id='dot_yellowgreen' viewBox='0 0 10 10' refX='5' refY='5' markerWidth='5' markerHeight='5'>
                        <circle cx='5' cy='5' r='5' fill='yellowgreen' />
                    </marker>

                </defs>
                <g id="lines">
                </g>
            </svg>
        </div>
        <div id='main_table' class='main_table'></div>
        <div style="width:110vw"> -- </div>

        <details class='toolbar' open="true">
            <summary>
                &#128295;
            </summary>
                Start from...<br>
                <select id="start_select">
                    <option value="" id="_node__none__" selected>---</option>
                </select><br>
                <input type="checkbox" id="unconnected" name="unconnected" value="unconnected" style="display: none;">
                
                <details>
                    <summary>Filter nodes...</summary>
                    <input type="text" id="search_input" size="20"><br>
                    <a class="button" id="search_button" href="#"> FILTER.</a>
                    <select id="find_select"></select>                    
                </details>                
                                
                <details>
                    <summary>
                    Python
                    </summary>
                    <textarea id="py_intput" name="py_intput" rows="4" cols="40"></textarea>
                    <a class="button" id="exec_button" href="#"> exec()</a>
                    <textarea id="py_output" name="py_output" rows="4" cols="40"></textarea>
                    <br>
                </details>
                <details>
                    <summary>Notes</summary>
                    <textarea id="notes" name="notes" rows="8" cols="60"></textarea>
                </details>
                <details>
                    <summary>Save Vars</summary>
                    <div id="save_vars" class='scrollable'></div>
                </details>
                <details>
                    <summary>Quests</summary>
                    <div id="quests" class='scrollable'></div>
                </details>
                <details>
                    <summary>Mods</summary>
                    <label class="button">
                        <input type="file" id="import_mod" name="import_mod">LOAD MOD
                    </label>
                    <br>
                    <a class="button" id="save_to_modfile" href="#" download="plot_mod.py" >WRITE MOD</a>
                </details>
                <details>
                    <summary >Config</summary>
                        min-width: <input value='38em' type="text" id="cfg_width" size="10">
                        font-size: <input type="text" value='100%' id="cfg_font" size="10"><br>
                        left: <input type="text" id="cfg_left" size="10">
                        top: <input type="text" id="cfg_top" size="10">
                        <button type="button" class="small_button" id="cfg_apply">Apply</button>
                </details>
                <br>
                <a class="button" id="save_to_file" href="#" download="plot.txt">WRITE</a>
    </details>

        <div class='side_panel' id='side_panel'>   
            <div id='node_edit_header' class='side_panel_header'>--EDIT NODE--</div>
            
            <details open="true">
                <summary id='node_edit_root' >
                    New Node...
                </summary>              
                    <details>
                        <summary>Clone Subplot</summary>
                        Warning: Cloning is slow and may create un-listed nodes!<br>
                        Clone prefix:<input type="text" id="clone_input_prefix" size="20">
                        <br>
                        In names replace: <input type="text" id="clone_input_name" size="20"> with: <input type="text" id="clone_output_name" size="20">
                        <br>
                        End nodes name list (space separated):
                        <br>
                        <input type="text" id="clone_end_names" size="60">
                        <br>
                        <button type="button" class="button" id="clone"> Clone from This Node</button>
                    </details>                    

                    Node Type:
                    <input type="radio" id="radio_normal" name="node_type_radio" value="normal" checked>
                    <label for="radio_normal">NORMAL</label>
                    <input type="radio" id="radio_choice" name="node_type_radio" value="choice">
                    <label for="radio_choice">CHOICE</label>
                    <input type="radio" id="radio_branch" name="node_type_radio" value="branch">
                    <label for="radio_branch">BRANCH</label>
                    <input type="radio" id="radio_jump" name="node_type_radio" value="jump">
                    <label for="radio_jump">JUMP</label>
                    <br>

                    <label for="node_name">name:</label>
                    <input type="text" id="node_name" name="node_name" size="30">
                    <button type="button" class="small_button" id="draw_from_current"> Draw Graph from This Node</button>
                    
                    <div id='choice_node_fields' class="overflow_node_fields" style="display: none;">
                        <details id='choice' open="true">
                            <summary>
                                choice:
                            </summary>
                            <div style='margin-left: 20px;'>
                                if <input type="text" id="choice_condition_0" size="25">
                                txt:<input type="text" id="choice_label_0" size="20">
                                &#8627;<input type="text" id="choice_target_0" size="15" list="nodes"><br>

                                if <input type="text" id="choice_condition_1" size="25">
                                txt:<input type="text" id="choice_label_1" size="20">
                                &#8627;<input type="text" id="choice_target_1" size="15" list="nodes"><br>

                                if <input type="text" id="choice_condition_2" size="25">
                                txt:<input type="text" id="choice_label_2" size="20">
                                &#8627;<input type="text" id="choice_target_2" size="15" list="nodes"><br>

                                if <input type="text" id="choice_condition_3" size="25">
                                txt:<input type="text" id="choice_label_3" size="20">
                                &#8627;<input type="text" id="choice_target_3" size="15" list="nodes"><br>

                                if <input type="text" id="choice_condition_4" size="25">
                                txt:<input type="text" id="choice_label_4" size="20">
                                &#8627;<input type="text" id="choice_target_4" size="15" list="nodes"><br>

                                if <input type="text" id="choice_condition_5" size="25">
                                txt:<input type="text" id="choice_label_5" size="20">
                                &#8627;<input type="text" id="choice_target_5" size="15" list="nodes"><br>

                                if <input type="text" id="choice_condition_6" size="25">
                                txt:<input type="text" id="choice_label_6" size="20">
                                &#8627;<input type="text" id="choice_target_6" size="15" list="nodes"><br>

                                if <input type="text" id="choice_condition_7" size="25">
                                txt:<input type="text" id="choice_label_7" size="20">
                                &#8627;<input type="text" id="choice_target_7" size="15" list="nodes"><br>
                            </div>
                        </details>
                    </div>

                    <div id='normal_node_fields' style="display: '';">
                        <div id='next_field'>
                        	<label for="next">next:</label>
                        	<input type="text" list="nodes" id="next" name="next" size="30" >
                        	<button type="button" class="small_button" id="plus_one"> name +1 </button>
						</div>
                        <label for="pc">PC: </label>
                        <select name="pc" id="pc">
                            <option value=""> </option>
                            <option value="last">Use Last</option>
                            <option value="smile">Smile</option>
                            <option value="happy">Happy</option>
                            <option value="blush">Blush</option>
                            <option value="neutral">Neutral</option>
                            <option value="upset">Upset</option>
                            <option value="shock">Shock</option>
                            <option value="scripted">Scripted*</option>
                        </select><br>

                        <label for="txt">txt:</label>
                        <textarea id="txt" name="txt" rows="6" cols="60"></textarea><br>

                        <details>
                            <summary>
                                npc: <input type="text" list="npcs" id="npc" name="npc" size="30">
                            </summary>
                            <img id="npc_preview" alt="[no image]" src="" class="npc_preview">
                        </details>
                    </div>
						
                    <div id='branch_node_fields' class="overflow_node_fields" style="display: none;">
                        <details open="true">
                            <summary>
                                branch:
                            </summary>
                            <div id='branch' style='margin-left: 20px;'>
                                if <input type="text" id="branch_condition_0" size="30">&#8627;
                                <input type="text" id="branch_target_0" list="nodes" size="30"><br>
                            </div>
                            <button type="button" class="button" id="add_branch" style='margin-left: 30px;'>+ New BRANCH</button>
                        </details>
                    </div>

                    <div id='jump_node_fields' style="display: none;">                                 
                        <label for="eval_jump_to">eval_jump_to:</label><br>               
                        <input type="text" id="eval_jump_to" name="eval_jump_to" size="60" style='margin-left: 20px;'><br>                    
                    </div>

                    <details>
                        <summary>
                            img: <input type="text" list="imgs" id="img" name="img" size="30">
                        </summary>
                        <img id="img_preview" alt="[no image]" src="" class="preview">
                    </details>

                    <details>
                        <summary>
                            cmd:
                        </summary>
                        <div id='cmd' style='margin-left: 20px;'>
                            <input type="text" id="cmd_0" list="cmds" size="60">
                        </div>
                        <button type="button" class="button" id="cmd_" style='margin-left: 30px;'>+ New CMD</button>

                        <details>
                            <summary>API:
                            </summary>
                            <div class='api'>
                            <br>CONSTANTS:<br>
                            <span class='api_def'>TIME.NIGHT</span> = <span class='api_num'>0 </span>      # 0-3 <br>
                            <span class='api_def'>TIME.MORNING</span> = <span class='api_num'>1</span>     # 4-7 <br>
                            <span class='api_def'>TIME.NOON</span> = <span class='api_num'>2 </span>       # 8-11 <br>
                            <span class='api_def'>TIME.MIDDAY</span> = <span class='api_num'>3</span>      # 12-15 <br>
                            <span class='api_def'>TIME.AFTERNOON</span> = <span class='api_num'>4</span>   # 16-19 <br>
                            <span class='api_def'>TIME.EVENING</span> = <span class='api_num'>5</span>     # 20-23 <br>
                            <br>
                            <span class='api_def'>TIME.MONDAY</span> = <span class='api_num'>0</span> <br>
                            <span class='api_def'>TIME.TUESDAY</span> = <span class='api_num'>1</span> <br>
                            <span class='api_def'>TIME.WEDNESDAY</span> = <span class='api_num'>2</span> <br>
                            <span class='api_def'>TIME.THURSDAY</span> = <span class='api_num'>3</span> <br>
                            <span class='api_def'>TIME.FRIDAY</span> = <span class='api_num'>4</span> <br>
                            <span class='api_def'>TIME.SATURDAY</span> = <span class='api_num'>5</span> <br>
                            <span class='api_def'>TIME.SUNDAY</span> = <span class='api_num'>6</span> <br>
                            <br>
                            <span class='api_def'>EXPO.NUDE</span> = <span class='api_num'>127</span> <br>
                            <span class='api_def'>EXPO.POKIES</span> = <span class='api_num'>64</span> <br>
                            <span class='api_def'>EXPO.PUSSY</span> = <span class='api_num'>32</span> <br>
                            <span class='api_def'>EXPO.BOOBS</span> = <span class='api_num'>16</span> <br>
                            <span class='api_def'>EXPO.PART_PUSSY</span> = <span class='api_num'>8</span> <br>
                            <span class='api_def'>EXPO.PART_BOOBS</span> = <span class='api_num'>4</span> <br>
                            <span class='api_def'>EXPO.BOTTOMLESS</span> = <span class='api_num'>2</span> <br>
                            <span class='api_def'>EXPO.TOPLESS</span> = <span class='api_num'>1</span> <br>
                            <span class='api_def'>EXPO.UNDRESSED</span> = <span class='api_num'>3</span> # = BOTTOMLESS + TOPLESS <br>
                            <span class='api_def'>EXPO.EXPOSED</span> = <span class='api_num'>48</span> # = PUSSY+BOOBS <br>
                            <span class='api_def'>EXPO.INDECENT</span> = <span class='api_num'>51</span> # = UNDRESSED+EXPOSED <br>
                            <br>
                            <br>Python:<br>
                             <span class='api_def'>abs</span>(x)
                                <div class='api_doc'>Return the absolute value of a number.</div>

                             <span class='api_def'>all</span>(iterable)
                                <div class='api_doc'>Return True if all elements of the iterable are true (or if the iterable is empty).</div>

                             <span class='api_def'>any</span>(iterable)
                                <div class='api_doc'>Return True if any element of the iterable is true. If the iterable is empty, return False.</div>

                             <span class='api_def'>divmod</span>(a, b)
                                <div class='api_doc'>Take two (non-complex) numbers as arguments and return a pair of numbers consisting of their quotient and remainder when using integer division.       </div>

                             <span class='api_def'>len</span>(s)
                                <div class='api_doc'>Return the length (the number of items) of an object.</div>

                             <span class='api_def'>max</span>(iterable, *[, key, default])<br>
                             <span class='api_def'>max</span>(arg1, arg2, *args[, key])
                                <div class='api_doc'>Return the largest item in an iterable or the largest of two or more arguments. </div>

                            <span class='api_def'>min</span>(iterable, *[, key, default])<br>
                            <span class='api_def'>min</span>(arg1, arg2, *args[, key])
                                <div class='api_doc'>Return the smallest item in an iterable or the smallest of two or more arguments.</div>

                            <span class='api_def'>round</span>(number[, ndigits])
                                <div class='api_doc'>Return number rounded to ndigits precision after the decimal point. If ndigits is omitted or is None, it returns the nearest integer to its input.</div>
                            <br>DataBase:<br>
                            <span class='api_def'>save.add_item</span>(name, value='')
                                <div class='api_doc'>Set name to value, same as self[name]=value</div>

                            <span class='api_def'>save.set_list</span>(key, input_list)
                            <div class='api_doc'>Stores the input_list as a string</div>

                            <span class='api_def'>save.get_list</span>(name)
                                <div class='api_doc'>Returns a value as if it was a list</div>

                            <span class='api_def'>save.append_list</span>(name, value)
                                <div class='api_doc'>Appends an item to a list stored using set_list(). Creates a new list if needed</div>

                            <span class='api_def'>save.del_from_list</span>(list_name, value)
                                <div class='api_doc'>Remove an item from a list stored using set_list()</div>

                            <span class='api_def'>save.is_empty</span>()
                                <div class='api_doc'>Returns True if there are no keys in the db</div>

                            <span class='api_def'>save.items</span>()
                                <div class='api_doc'>Returns an iterator over the key and values (same as dict)</div>

                            <span class='api_def'>save.clear</span>(subprefix=<span class='api_num'>None</span>)
                                <div class='api_doc'>Removes keys and values. If subprefix is not empty only removes keys that starts with subprefix</div>

                            <span class='api_def'>save.add_flag</span>(key, value)
                                <div class='api_doc'>Adds a flag to a key name.
                                Use has_flag() to check if the flag has been set.</div>

                            <span class='api_def'>save.has_flag</span>(key, value)
                                <div class='api_doc'>Checks if value flag has been set under the key name</div>

                            <span class='api_def'>save.get_flags</span>(key)
                                <div class='api_doc'>Returns a list of flags set under the key name.</div>

                            <span class='api_def'>save.remove_flag</span>(key, flag)
                                <div class='api_doc'>Removes a flag</div>

                            <span class='api_def'>save.remove</span>(*keys)
                                <div class='api_doc'>Removes a key(s) from the DB</div>

                            <span class='api_def'>save</span>[key] = value
                                <div class='api_doc'>Sets the value under the key name (same as dict)</div>

                            <span class='api_def'>save.key</span> = value
                                <div class='api_doc'>Sets the value under the key name (same as save[key] = value). </div>

                            <span class='api_def'>save.key</span>
                                <div class='api_doc'>Returns the value under the key name (same as save[key]). If 'key' is not in the DataBase it will return 0. You can use this to increment values that don't exist eg. save.something += 7 </div>

                            <span class='api_def'>save</span>[key]
                                <div class='api_doc'>Returns the value stored under the key name (same as dict)</div>

                            <span class='api_def'>key</span> <span class='api_num'>in</span> save
                                <div class='api_doc'>Returns True if key is in save (same as dict)</div>

                            <span class='api_def'>inventory.</span>*
                                <div class='api_doc'>Same as save.*</div>

                            <br>Utility:<br>
                            <span class='api_def'>show_error</span> (txt, do_clear=<span class='api_num'>False</span>)
                                <div class='api_doc'>Show a error message, if clear is True old error msg are removed</div>

                            <span class='api_def'>clamp</span> (x, min_val, max_val)
                                <div class='api_doc'>returns the value of x constrained to the range min_val to max_val</div>
                            <span class='api_def'>open_url</span> (url, new_tab=<span class='api_num'>True</span>)
                                <div class='api_doc'>Opens/redirects to an URL.
                                If new_tab is True it will be opened in a new tab/window(?)</div>
                            <br>Random:<br>
                            <span class='api_def'>random</span> ()
                                <div class='api_doc'>Returns a random float in 0.0-1.0 range,
                                uses javascript  Math.random</div>

                            <span class='api_def'>randint</span> (start, stop=<span class='api_num'>None</span>)
                                <div class='api_doc'>Returns a random int in start-stop range</div>

                            <span class='api_def'>random_choice</span> (input_list, weights=<span class='api_num'>None</span>)
                                <div class='api_doc'>Returns a random element from the input_list
                                weights is a optional list of integer weights</div>

                            <span class='api_def'>random_choice_adv</span> (name, weights, static_weights_bonus=<span class='api_num'>None</span>)
                                <div class='api_doc'>Returns a weighted random element from the weights dict
                                   eg.{'a':10,'b':5,'c':1} returns 'a' in 62.5%, 'b' in 32.25%, 'c' in 6.25%
                                   After each call the chosen's weights are reduced by 1 (to a minimum of 1).
                                   'name' is the prefix used for storing previous results.
                                   When all weights become equal the wights reset to the initial value.
                                   The same item can't be chosen twice in a row.
                                   if static_weights_bonus is provided, its values are added to the weights dict</div>

                            <span class='api_def'>chance</span> (p)
                                <div class='api_doc'>Returns True in 'p'% cases,
                                'p' should be in the 0-100 range</div>

                            <span class='api_def'>d</span> (sides, num=<span class='api_num'>1</span>)
                                <div class='api_doc'>Rolls a die with 'sides' number of sides, eg. d(6),
                                to roll multiple dice pass in a num eg. D&D '4d6' would be d(6, 4)</div>

                            <br>Time:<br>
                            <span class='api_def'>set_tce</span> (target, day, hour, map_poi, map_redirect)
                                <div class='api_doc'>Set a Time Critical Event (tce) that will start on the given 'day' and 'hour'.
                                'target' is the name of the plot node that the player will jump to.
                                 the event will trigger when moving via the map,
                                 the map_poi must be one of the known Points Of Interest,
                                 when the player clicks it at the right time ('day', 'hour') it will jump
                                 to the 'target' plot node. Clicking any other poi will jump to 'map_redirect'
                                 If a TCE is set, the in-game clock will never (normally) progress past day*24+hour,
                                 until the event is resolved.
                                 Only 1 (one) TCE can be set for a given day, hour.</div>

                            <span class='api_def'>remove_tce</span> (day=<span class='api_num'>None</span>, hour=<span class='api_num'>None</span>)
                                <div class='api_doc'>Removes (cancels) a TCE. Called automatically when a TCE is triggered from map.
                                If day is None and hour is None the current time (save.time) is used</div>

                            <span class='api_def'>get_tce</span> (timestamp = <span class='api_num'>None</span>)
                                <div class='api_doc'>Returns the [target, day, hour, map_poi, map_redirect]
                                set for a TCE with the given timestamp (day*24+hour)
                                if timestamp is None - the current time (save.time) is used
                                if there is no TCE with the timestamp - returns None</div>

                            <span class='api_def'>get_tce_arg</span> (tce, arg_name)
                                <div class='api_doc'>Returns the arguments used for creating the given TCE.
                                tce must be a list as returned by get_tce()
                                valid arg_name values: 'target', 'day', 'hour', 'map_poi', 'map_redirect'</div>

                            <span class='api_def'>get_hour</span> ()
                                <div class='api_doc'>Returns the current hour</div>

                            <span class='api_def'>get_weekday</span> ()
                                <div class='api_doc'>Returns the day of the week as an int</div>

                            <span class='api_def'>is_weekday</span> (weekday)
                                <div class='api_doc'>Returns True if today is 'weekday'
                                eg.: 'is_weekday(TIME.MONDAY)'
                                To test if it's a 'work day' use 'not is_weekend()'</div>

                            <span class='api_def'>is_weekend</span> ()
                                <div class='api_doc'>Returns True if it's SATURDAY, SUNDAY or FRIDAY AFTERNOON</div>

                            <span class='api_def'>get_datetime</span> ()
                                <div class='api_doc'>Returns (day, hour)</div>

                            <span class='api_def'>get_day</span> ()
                                <div class='api_doc'>Returns the current day number (starting from 0)</div>

                            <span class='api_def'>is_time_of_day</span> (*time_of_day_list)
                                <div class='api_doc'>Returns True if the current time of day is in the time_of_day_list
                                eg: 'is_time_of_day(TIME.MORNING, TIME.NOON)'</div>

                            <span class='api_def'>is_day</span> ()
                                <div class='api_doc'>Returns True if it's MORNING, NOON, MIDDAY, or AFTERNOON</div>

                            <span class='api_def'>get_time_of_day</span> ()
                                <div class='api_doc'>Returns the time of day as an int</div>

                            <span class='api_def'>set_hard_datetime</span> (day, hour)
                                <div class='api_doc'>Set the in game time, ignoring everything</div>

                            <span class='api_def'>get_day_name</span> (future_day=<span class='api_num'>0</span>)
                                <div class='api_doc'>Returns the (string) name of the current day
                                if future_day is provided it returns the name
                                of the day future_day days away</div>

                            <span class='api_def'>get_time_of_day_name</span> (use_in_at=<span class='api_num'>False</span>)
                                <div class='api_doc'>Returns the time of day as a string</div>

                            <span class='api_def'>set_time_of_day</span> (time_of_day)
                                <div class='api_doc'>Sets the time of day, (usually) moving the time forward.
                                Note: The actual time is set to the first hour in the give time period,
                                    this may turn the clock back by up to 3h!
                                    eg. if it's 7AM in the morning and you call
                                    set_time_of_day(TIME.MORNING) it will become 4AM</div>

                            <span class='api_def'>progress_time</span> (amount=<span class='api_num'>1</span>)
                                <div class='api_doc'>Moves the in-game clock by amount hours (int),
                                 also displays the current time/date in the status div</div>
                            <br>Clothes:<br>
                            <span class='api_def'>get_equipped</span> (tag=<span class='api_num'>None</span>, slot=<span class='api_num'>None</span>, exclude_tag='nude')
                                <div class='api_doc'>Returns a list of equipped items
                                if tag is not None only the items with the tag get returned
                                if slot is not None only the (one) item in the slot is returned (if any)
                                no item that has the 'exclude_tag' tag will be returned</div>

                            <span class='api_def'>get_item_name</span> (item_id, *args)
                                <div class='api_doc'>Returns the name or names of the given item or items
                                Note: Parts of the names in parenthesis will be dropped e.g 'Shirt (pink)' -> 'Shirt'
                                      For multiple items the names will be comma separated.</div>

                            <span class='api_def'>give_clothes_by_tag</span> (tag)
                                <div class='api_doc'>Give all clothes that have the given tag</div>

                            <span class='api_def'>has_clothes_by_tag</span> (tag, eqquiped_only=<span class='api_num'>False</span>)
                                <div class='api_doc'>Returns True if the player has any items with the given tag
                                if eqquiped_only is True, it checks only equipped items.</div>

                            <span class='api_def'>strip_nude</span> ()
                                <div class='api_doc'>Takes of all the clothes</div>

                            <span class='api_def'>set_clothes</span> (clothes_list, show_pc=<span class='api_num'>True</span>)
                                <div class='api_doc'>Gives and equips all the items in the clothes_list
                                If multiple items in the list share the same slots the last one will be used.
                                No items are striped before updating the equipment.
                                Also shows the PC avatar/paperdoll if show_pc is True</div>

                            <span class='api_def'>change_clothes</span> (tag_set=<span class='api_num'>None</span>, enforce_stats=<span class='api_num'>None</span>, limited=<span class='api_num'>1</span>, loopback=<span class='api_num'>False</span>)
                                <div class='api_doc'>Alias for shop with no items</div>

                            <span class='api_def'>shop</span> (shop_id=<span class='api_num'>None</span>, tag_set=<span class='api_num'>None</span>, enforce_stats=<span class='api_num'>1</span>, buyback=<span class='api_num'>False</span>, limited=<span class='api_num'>False</span>, loopback=<span class='api_num'>False</span>)
                                <div class='api_doc'>Show the shop/wardrobe screen.
                                shop_id is the name of the shop (see data/shops.txt)
                                if tag_set is not None, only items that have the tag(s) will be shown
                                if buyback is True, the PC can sell all her clothes to the shop</div>

                            <span class='api_def'>update_current_clothes_list</span> ()
                                 <div class='api_doc'>Update the current clothes list</div>

                            <span class='api_def'>is_exposed</span> (test_expo, logic='any')
                                <div class='api_doc'>Returns True/False depending on current clothes and the given test_expo.
                                Use the values from the EXPO eg.:
                                test_expo=EXPO.PUSSY+EXPO.PART_BOOBS
                                if logic == 'any': returns True if at least one bit matches
                                if logic == 'all': returns True if all bit match
                                if logic == 'some': uses RNG, returns True more often if more bits match</div>

                            <span class='api_def'>get_exposure</span> ()
                                 <div class='api_doc'>Returns a int (bitmask) used for checking nudity</div>

                            <span class='api_def'>match_clothes</span> (test_set)
                                <div class='api_doc'>Returns the % match between the current clothes and the test_set
                                as a float in 0.0, 1.0 range.
                                Note: test_set must be a set!</div>

                            <span class='api_def'>check_uniform</span> (slots, tags, clothes_set=<span class='api_num'>None</span>)
                                <div class='api_doc'>Check if the clothes_set is a valid uniform.
                                If clothes_set is None the global current_clothes_set is used.
                                A uniform is valid if all items in 'slots' have
                                at least one of the tags in the 'tags' set</div>

                            <span class='api_def'>get_underwear</span> ()
                                <div class='api_doc'>Returns a list of currently equiped underwear types, one of:
                                ['bra', 'panties']
                                ['bra']
                                ['panties']
                                []</div>

                            <span class='api_def'>get_equipped_tagset</span> ()
                                <div class='api_doc'>Returns a set with the tags of the currently equipped clothes</div>
                            <br>Credits:<br>
                            <span class='api_def'>start_credits</span> ()
                                <div class='api_doc'>Fetches the credits txt and starts the credits animation
                                by default credits are in data/supporters.txt (var credits = ...)</div>

                            <span class='api_def'>end_credits</span> ()
                                <div class='api_doc'>End the credits animation
                                Note: The anim is now run by css, so this just hides an element</div>
                            <br>In-line styling:    <br>
                            <span class='api_def'>S</span> (txt, css)
                                <div class='api_doc'>Wrapper for creating in-line styling</div>

                            <span class='api_def'>RED</span> (txt)
                                <div class='api_doc'>Wrapper for creating in-line styling -color red</div>

                            <span class='api_def'>B</span> (txt)
                                <div class='api_doc'>Wrapper for creating in-line styling - bold</div>

                            <span class='api_def'>I</span> (txt)
                                <div class='api_doc'>Wrapper for creating in-line styling - italic</div>

                            <span class='api_def'>Rus</span> (txt)
                                <div class='api_doc'>Wrapper for creating in-line styling - russian font</div>
                            <br>Core:<br>
                            <span class='api_def'>set_quest</span> (quest_name, quest_text=<span class='api_num'>None</span>)
                                <div class='api_doc'>Update the questlog setting the visible text to quest_text </div>

                            <span class='api_def'>set_bodypart_img</span> (bodypart, img_path)
                                <div class='api_doc'>Change the image for a bodypart
                                img_path should be the relative path/url to the img</div>

                            <span class='api_def'>set_body_overlay</span> (img_name=<span class='api_num'>None</span>, img_path='img/pc/')
                                <div class='api_doc'>Adds a overlay image on top of the pc image stack </div>

                            <span class='api_def'>counter_inc</span> (name)
                                <div class='api_doc'>Increment a persistent counter by 1.
                                The counter will only be increased once per in-game date/time</div>

                            <span class='api_def'>counter_get</span> (name)
                                <div class='api_doc'>Get the value of a counter</div>

                            <span class='api_def'>exec_once</span> (cmd)
                                <div class='api_doc'>Run a command once per game/visit-to-node</div>

                            <span class='api_def'>splash</span> (rgba=<span class='api_num'>None</span>, mode='screen', backdrop_filter='none', anim='fade_out', time=<span class='api_num'>1100</span>)
                                <div class='api_doc'>Show a overlay with the color, blend mode and filter using the given animation
                                Note: Firefox has no support for backdrop-filter!</div>

                            <span class='api_def'>svg_filter</span> (filter_name='default')
                                <div class='api_doc'>Set a filter on both pc and npc images
                                Note: Remember to reset the filter!!!</div>

                            <span class='api_def'>overlay_img</span> (img_url=<span class='api_num'>None</span>, img_class='overlay_blend_screen', clear=<span class='api_num'>True</span>)
                                <div class='api_doc'>Adds an overlay image on top of the main image</div>

                            <span class='api_def'>parallax_imgs</span> (img_list=<span class='api_num'>None</span>, scroll_dir='y')
                                <div class='api_doc'>Add a set of images with scrolling effect,
                                Note: This is the CSS implementation, it's very slow on some hardware</div>

                            <span class='api_def'>num_pc_bodymods</span> (mod_type='piercing')
                                <div class='api_doc'>Get the number of body modifications the PC currently has
                                mod_type can be 'piercing' or 'tattoo'</div>

                            <span class='api_def'>add_pc_bodymod</span> (name, img, mod_type='piercing')
                                <div class='api_doc'>Add a body modifications image
                                mod_type can be 'piercing' or 'tattoo'
                                This function will silently fail if PC has 3 or more bodymods of that type</div>

                            <span class='api_def'>show_pc</span> (visible=<span class='api_num'>True</span>, face=<span class='api_num'>None</span>)
                                <div class='api_doc'> Show the pc avatar image with the current clothing and face</div>

                            <span class='api_def'>update_stats</span> ()
                                <div class='api_doc'>Updates the player stats
                                currently adds +1 max_slut for every 4 points of slut</div>

                            <span class='api_def'>invalidate_giftcard</span> ()
                                <div class='api_doc'>Removes giftcard money (game specific)</div>

                            <span class='api_def'>move_to</span> (target, rollback=<span class='api_num'>False</span>)
                                <div class='api_doc'>Moves to the target plot node
                                if rollback is True, a rollback point is saved</div>
                            <br>Map:<br>
                            <span class='api_def'>add_poi</span> (name)
                                <div class='api_doc'>Add a Point Of Interest to the list of known POIs</div>

                            <span class='api_def'>del_poi</span> (name)
                                <div class='api_doc'>Removes a Point Of Interest to the list of known POIs</div>

                            <span class='api_def'>show_map</span> (poi_list=<span class='api_num'>None</span>, show_known=<span class='api_num'>True</span>)
                                 <div class='api_doc'>Shows the map screen updates the map pins POI</div>

                            <span class='api_def'>remove_map_event</span> (target, from_poi=<span class='api_num'>None</span>, target_poi=<span class='api_num'>None</span>)
                                <div class='api_doc'>Removes a dynamic map event,
                                If target is None this will remove ALL map events for the  from_poi/target_poi</div>

                            <span class='api_def'>set_map_event</span> (target, from_poi=<span class='api_num'>None</span>, target_poi=<span class='api_num'>None</span>)
                                <div class='api_doc'>Sets a dynamic map event</div>
                            <br>
                            Music:<br>
                            <span class='api_def'>music</span> (name, loop=<span class='api_num'>True</span>)
                                <div class='api_doc'>Alias for play_music</div>

                            <span class='api_def'>play_music</span> (url=<span class='api_num'>None</span>, loop=<span class='api_num'>True</span>)
                                <div class='api_doc'>Play a music(.mp3) file using the browsers build-in player</div>
                        </div>
                        </details>


                    </details>

                <input type="checkbox" id="save" name="save" value="save" checked>
                <label for="save"> In-Game Autosave</label><br>
                <div class="flex_spacer">
                    <button type="button" class="button" id="commit"> Save Node </button>
                    <div>
                        <button type="button" class="button" id="remove_all"> Remove SUB-PLOT </button>
                        <button type="button" class="button" id="remove"> Remove THIS node</button>
                    </div>
                </div>
            </details>
        </div>
        <datalist id="nodes">
        </datalist>
        <datalist id="ifs">
            <option value="random_branch">
            <option value="True">
            <option value="chance(50)">
            <option value="is_weekend()">
            <option value="get_weekday() in (TIME.MONDAY, TIME.TUESDAY)">
            <option value="is_weekday(TIME.MONDAY)">
            <option value="is_weekday(TIME.TUESDAY)">
            <option value="is_weekday(TIME.WEDNESDAY)">
            <option value="is_weekday(TIME.THURSDAY)">
            <option value="is_weekday(TIME.FRIDAY)">
            <option value="is_weekday(TIME.SATURDAY)">
            <option value="is_weekday(TIME.SUNDAY)">
            <option value="is_time_of_day(TIME.NIGHT,TIME.MORNING,TIME.NOON,TIME.MIDDAY,TIME.AFTERNOON,TIME.EVENING)">
            <option value="is_time_of_day(TIME.NIGHT,TIME.EVENING)">
            <option value="is_time_of_day(TIME.MIDDAY,TIME.AFTERNOON,TIME.EVENING)">
            <option value="is_day()">
            <option value="is_exposed(EXPO.BOOBS+EXPO.PUSSY, 'any')">
            <option value="is_exposed(EXPO.EXPOSED, 'all')">
            <option value="is_exposed(EXPO.PART_EXPOSED, 'any')">
            <option value="is_exposed(EXPO.INDECENT, 'all')">
            <option value="is_exposed(EXPO.PART_PUSSY+EXPO.PART_PUSSY, 'all')">
            <option value="is_exposed(EXPO.BOTTOMLESS+EXPO.TOPLESS, 'some')">
            <option value="match_clothes({})>0.0">
            <option value="get_underwear()">
            <option value="get_equipped_tagset()">
            <option value="get_equipped(tag=None, slot=None, exclude_tag='nude')">
            <option value="save.">
            <option value="save.money">
            <option value="save.max_slut">
            <option value="save.slut">
            <option value="counter_get('name')">
            <option value="has_clothes_by_tag('', False)">
            <option value="count_clothes_by_tag(tag, eqquiped_only=False)">
            <option value="get_tce(timestamp = None)">
            <option value="get_tce_arg(get_tce(), 'target')">
            <option value="get_tce_arg(get_tce(), 'day')">
            <option value="get_tce_arg(get_tce(), 'hour')">
            <option value="get_tce_arg(get_tce(), 'map_poi')">
            <option value="get_tce_arg(get_tce(), 'map_redirect')">
        </datalist>

        <datalist id="imgs">
            <option value="img/black.webp">
            <option value="img/blank.webp">
            <option value="img/gray.webp">
            <option value="img/nag.webp">
            <option value="img/bar/.webp">
            <option value="img/bar/1x_bj.webp">
            <option value="img/bar/3x_bj.webp">
            <option value="img/bar/3x_bj_cum.webp">
            <option value="img/bar/bathroom.webp">
            <option value="img/bar/box.webp">
            <option value="img/bar/delivery_bj.webp">
            <option value="img/bar/delivery_bj_cum.webp">
            <option value="img/bar/deli_at_door.webp">
            <option value="img/bar/fatman_bj.webp">
            <option value="img/bar/fatman_fuck.webp">
            <option value="img/bar/handout.webp">
            <option value="img/bar/home_bj.webp">
            <option value="img/bar/office_anal.webp">
            <option value="img/bar/office_anal_cum.webp">
            <option value="img/bar/office_anal_gap.webp">
            <option value="img/bar/office_anal_plug.webp">
            <option value="img/bar/office_bj.webp">
            <option value="img/bar/office_bj2.webp">
            <option value="img/bar/office_bj_cum.webp">
            <option value="img/bar/office_facial.webp">
            <option value="img/bar/office_fuck.webp">
            <option value="img/bar/office_gangbang.webp">
            <option value="img/bar/office_jerk.webp">
            <option value="img/bar/onlookers.webp">
            <option value="img/bar/outside.webp">
            <option value="img/bar/outside_dark.webp">
            <option value="img/bar/plugged.webp">
            <option value="img/bar/plugged_smack.webp">
            <option value="img/bar/pluggin.webp">
            <option value="img/bar/w7_bj1.webp">
            <option value="img/bar/w7_bj2.webp">
            <option value="img/bar/w7_bj3.webp">
            <option value="img/bar/wash_1.webp">
            <option value="img/bar/wash_2.webp">
            <option value="img/bar/wash_3.webp">
            <option value="img/bar/wash_4.webp">
            <option value="img/bar/wash_5.webp">
            <option value="img/bar/wash_6.webp">
            <option value="img/bar/wash_7.webp">
            <option value="img/bar/x2_bj_day.webp">
            <option value="img/bar/x2_bj_day2.webp">
            <option value="img/bar/x2_bj_day_cum.webp">
            <option value="img/bar/x2_bj_night.webp">
            <option value="img/bar/x2_bj_night2.webp">
            <option value="img/bar/x2_bj_night_cum.webp">
            <option value="img/beach/beach_bj.webp">
            <option value="img/beach/beach_f.webp">
            <option value="img/beach/beach_f2.webp">
            <option value="img/beach/beach_man.webp">
            <option value="img/beach/blowjob.webp">
            <option value="img/beach/cop_bj.webp">
            <option value="img/beach/cop_bj2.webp">
            <option value="img/beach/cop_bj_cum.webp">
            <option value="img/beach/finger.webp">
            <option value="img/beach/found.webp">
            <option value="img/beach/handjob.webp">
            <option value="img/beach/hut_pose_1.webp">
            <option value="img/beach/hut_pose_2.webp">
            <option value="img/beach/pose_1.webp">
            <option value="img/beach/pose_2.webp">
            <option value="img/beach/pose_3.webp">
            <option value="img/beach/pose_4.webp">
            <option value="img/beach/rocks_1.webp">
            <option value="img/beach/rocks_2.webp">
            <option value="img/beach/rocks_3.webp">
            <option value="img/beach/rocky_beach.webp">
            <option value="img/beach/rocky_beach_relax.webp">
            <option value="img/beach/rocky_beach_relax2.webp">
            <option value="img/beach/rocky_beach_sleep.webp">
            <option value="img/beach/rocky_beach_sleep_cum.webp">
            <option value="img/beach/rocky_beach_sleep_shadow.webp">
            <option value="img/beach/sea.webp">
            <option value="img/beach/sea2.webp">
            <option value="img/beach/shame.webp">
            <option value="img/beach/sneak.webp">
            <option value="img/beach/swim.webp">
            <option value="img/beach/swim_nude.webp">
            <option value="img/beach/tide.webp">
            <option value="img/beach/tide_shadow1.webp">
            <option value="img/beach/tide_shadow2.webp">
            <option value="img/bens/bdsm1.webp">
            <option value="img/bens/lick.webp">
            <option value="img/bens/lick_cum.webp">
            <option value="img/bens/meth_lab1.webp">
            <option value="img/bens/meth_lab2.webp">
            <option value="img/bens/meth_lab3.webp">
            <option value="img/bens/outside.webp">
            <option value="img/bens/slums_blackout.webp">
            <option value="img/bens/slums_druged.webp">
            <option value="img/big_top/1h_later.webp">
            <option value="img/big_top/backstage.webp">
            <option value="img/big_top/bj_long_1.webp">
            <option value="img/big_top/bj_long_2.webp">
            <option value="img/big_top/bj_long_3.webp">
            <option value="img/big_top/bj_start.webp">
            <option value="img/big_top/bj_start2.webp">
            <option value="img/big_top/cameraman_fuck.webp">
            <option value="img/big_top/cum_in_ass.webp">
            <option value="img/big_top/cum_in_ass_camera.webp">
            <option value="img/big_top/facial_1.webp">
            <option value="img/big_top/facial_2.webp">
            <option value="img/big_top/facial_3.webp">
            <option value="img/big_top/facial_4.webp">
            <option value="img/big_top/facial_5.webp">
            <option value="img/big_top/facial_6.webp">
            <option value="img/big_top/facial_7.webp">
            <option value="img/big_top/facial_other.webp">
            <option value="img/big_top/fake_cast1.webp">
            <option value="img/big_top/fake_cast2.webp">
            <option value="img/big_top/fake_cast3.webp">
            <option value="img/big_top/fake_cast4.webp">
            <option value="img/big_top/fake_cast5.webp">
            <option value="img/big_top/fingered.webp">
            <option value="img/big_top/fluff1.webp">
            <option value="img/big_top/fluff2.webp">
            <option value="img/big_top/fluff3.webp">
            <option value="img/big_top/fluff4.webp">
            <option value="img/big_top/gangbang1.webp">
            <option value="img/big_top/gangbang2.webp">
            <option value="img/big_top/gangbang3.webp">
            <option value="img/big_top/group_1.webp">
            <option value="img/big_top/group_2.webp">
            <option value="img/big_top/group_3_focus.webp">
            <option value="img/big_top/group_3_no_focus.webp">
            <option value="img/big_top/group_4_focus.webp">
            <option value="img/big_top/group_4_no_focus.webp">
            <option value="img/big_top/inside.webp">
            <option value="img/big_top/les1.webp">
            <option value="img/big_top/les1_focus.webp">
            <option value="img/big_top/les1_nofocus.webp">
            <option value="img/big_top/les2.webp">
            <option value="img/big_top/les2_cam.webp">
            <option value="img/big_top/les3.webp">
            <option value="img/big_top/les3_focus.webp">
            <option value="img/big_top/les3_nofocus.webp">
            <option value="img/big_top/les_start.webp">
            <option value="img/big_top/office.webp">
            <option value="img/big_top/other_fuck.webp">
            <option value="img/big_top/outside_day.webp">
            <option value="img/big_top/outside_night.webp">
            <option value="img/big_top/porn_1_focus.webp">
            <option value="img/big_top/porn_1_focus_cum.webp">
            <option value="img/big_top/porn_1_no_focus.webp">
            <option value="img/big_top/porn_2_focus.webp">
            <option value="img/big_top/porn_2_no_focus.webp">
            <option value="img/big_top/porn_3_focus.webp">
            <option value="img/big_top/porn_3_no_focus.webp">
            <option value="img/big_top/porn_4_focus.webp">
            <option value="img/big_top/porn_4_no_focus.webp">
            <option value="img/big_top/porn_5.webp">
            <option value="img/big_top/porn_6_focus.webp">
            <option value="img/big_top/porn_6_no_focus.webp">
            <option value="img/big_top/porn_7_focus.webp">
            <option value="img/big_top/porn_7_focus_cum.webp">
            <option value="img/big_top/porn_7_no_focus.webp">
            <option value="img/big_top/solo_1.webp">
            <option value="img/big_top/solo_1_focus.webp">
            <option value="img/big_top/solo_1_no_focus.webp">
            <option value="img/big_top/solo_2.webp">
            <option value="img/big_top/solo_3.webp">
            <option value="img/big_top/solo_4.webp">
            <option value="img/big_top/solo_4_focus.webp">
            <option value="img/big_top/solo_4_no_focus.webp">
            <option value="img/big_top/solo_end.webp">
            <option value="img/bus/bus_0.webp">
            <option value="img/bus/bus_1.webp">
            <option value="img/bus/bus_2.webp">
            <option value="img/bus/bus_3.webp">
            <option value="img/bus/bus_4.webp">
            <option value="img/bus/bus_5.webp">
            <option value="img/bus/bus_6.webp">
            <option value="img/bus/bus_7.webp">
            <option value="img/bus/bus_8.webp">
            <option value="img/bus/bus_9.webp">
            <option value="img/cafe/bound.webp">
            <option value="img/cafe/bound_blind.webp">
            <option value="img/cafe/bound_blind1.webp">
            <option value="img/cafe/bound_clamp.webp">
            <option value="img/cafe/bound_clothepins.webp">
            <option value="img/cafe/bound_gag.webp">
            <option value="img/cafe/bound_touch1.webp">
            <option value="img/cafe/bound_touch2.webp">
            <option value="img/cafe/bound_touch3.webp">
            <option value="img/cafe/dungeon.webp">
            <option value="img/cafe/dungeon2.webp">
            <option value="img/cafe/face_1.webp">
            <option value="img/cafe/face_2.webp">
            <option value="img/cafe/kneeling_maid.webp">
            <option value="img/cafe/old_fashioned.webp">
            <option value="img/cafe/spank.webp">
            <option value="img/car_event/car_bj.webp">
            <option value="img/car_event/car_fuck.webp">
            <option value="img/car_event/car_fuck2.webp">
            <option value="img/car_event/car_nude.webp">
            <option value="img/car_event/driver_bj.webp">
            <option value="img/car_event/pullup.webp">
            <option value="img/common/.webp">
            <option value="img/common/1_h_later.webp">
            <option value="img/common/1_shower_later.webp">
            <option value="img/common/against_wall.webp">
            <option value="img/common/against_wall_1.webp">
            <option value="img/common/against_wall_2.webp">
            <option value="img/common/against_wall_3.webp">
            <option value="img/common/backstreet.webp">
            <option value="img/common/backstreet_bj.webp">
            <option value="img/common/back_alley.webp">
            <option value="img/common/back_alley_night.webp">
            <option value="img/common/bar.webp">
            <option value="img/common/bar_night.webp">
            <option value="img/common/beach1.webp">
            <option value="img/common/beach2.webp">
            <option value="img/common/beach_dune.webp">
            <option value="img/common/beach_dusk.webp">
            <option value="img/common/beach_hut.webp">
            <option value="img/common/beach_hut_bbc.webp">
            <option value="img/common/beach_hut_inside.webp">
            <option value="img/common/beach_hut_inside2.webp">
            <option value="img/common/beach_night.webp">
            <option value="img/common/building_entrance.webp">
            <option value="img/common/burned_house.webp">
            <option value="img/common/bus.webp">
            <option value="img/common/bus_driver.webp">
            <option value="img/common/bus_full.webp">
            <option value="img/common/bus_night.webp">
            <option value="img/common/bus_stop.webp">
            <option value="img/common/bus_stop_night.webp">
            <option value="img/common/cafe.webp">
            <option value="img/common/cafe_inside.webp">
            <option value="img/common/cafe_night.webp">
            <option value="img/common/cafe_office.webp">
            <option value="img/common/caffeteria.webp">
            <option value="img/common/caffeteria2.webp">
            <option value="img/common/caffeteria3.webp">
            <option value="img/common/caffeteria3_dark.webp">
            <option value="img/common/caffeteria4.webp">
            <option value="img/common/city_day.webp">
            <option value="img/common/city_dusk.webp">
            <option value="img/common/city_morning.webp">
            <option value="img/common/city_morning2.webp">
            <option value="img/common/city_morning3.webp">
            <option value="img/common/city_morning4.webp">
            <option value="img/common/city_night_1.webp">
            <option value="img/common/city_night_2.webp">
            <option value="img/common/city_night_3.webp">
            <option value="img/common/city_night_4.webp">
            <option value="img/common/city_night_eddie.webp">
            <option value="img/common/class.webp">
            <option value="img/common/class2.webp">
            <option value="img/common/club.webp">
            <option value="img/common/club_inside.webp">
            <option value="img/common/club_inside_empty.webp">
            <option value="img/common/club_night.webp">
            <option value="img/common/club_office.webp">
            <option value="img/common/continue.webp">
            <option value="img/common/corridor_1.webp">
            <option value="img/common/crowd.webp">
            <option value="img/common/crowd_night.webp">
            <option value="img/common/cubicle.webp">
            <option value="img/common/cubicles.webp">
            <option value="img/common/dildo_ass.webp">
            <option value="img/common/dildo_ass_night.webp">
            <option value="img/common/dildo_pussy.webp">
            <option value="img/common/dildo_pussy_night.webp">
            <option value="img/common/door.webp">
            <option value="img/common/dp_dark.webp">
            <option value="img/common/elevators.webp">
            <option value="img/common/empty_fridge.webp">
            <option value="img/common/end.webp">
            <option value="img/common/fast_food_inside.webp">
            <option value="img/common/fence_hole.webp">
            <option value="img/common/fence_hole_dark.webp">
            <option value="img/common/finger_pussy.webp">
            <option value="img/common/finger_pussy_ass.webp">
            <option value="img/common/finger_pussy_ass_night.webp">
            <option value="img/common/finger_pussy_night.webp">
            <option value="img/common/flats.webp">
            <option value="img/common/forest_1.webp">
            <option value="img/common/forest_2.webp">
            <option value="img/common/forest_3.webp">
            <option value="img/common/forest_night.webp">
            <option value="img/common/generic_bj_1.webp">
            <option value="img/common/generic_bj_2.webp">
            <option value="img/common/generic_bj_3.webp">
            <option value="img/common/generic_bj_4.webp">
            <option value="img/common/group_at_night.webp">
            <option value="img/common/gym.webp">
            <option value="img/common/gym_night.webp">
            <option value="img/common/home.webp">
            <option value="img/common/homework.webp">
            <option value="img/common/home_afternoon.webp">
            <option value="img/common/home_back_sunset.webp">
            <option value="img/common/home_night.webp">
            <option value="img/common/home_night_entrance.webp">
            <option value="img/common/home_night_people.webp">
            <option value="img/common/hooker_alley.webp">
            <option value="img/common/jpn_bath.webp">
            <option value="img/common/later.webp">
            <option value="img/common/lecture.webp">
            <option value="img/common/lesson.webp">
            <option value="img/common/lesson2.webp">
            <option value="img/common/lesson3_end.webp">
            <option value="img/common/lesson3_start.webp">
            <option value="img/common/library.webp">
            <option value="img/common/locker.webp">
            <option value="img/common/locker2.webp">
            <option value="img/common/mall1.webp">
            <option value="img/common/mall2.webp">
            <option value="img/common/mall_full.webp">
            <option value="img/common/mall_wc.webp">
            <option value="img/common/mananger.webp">
            <option value="img/common/nap.webp">
            <option value="img/common/night_bj.webp">
            <option value="img/common/night_crime.webp">
            <option value="img/common/night_rain.webp">
            <option value="img/common/notice_board.webp">
            <option value="img/common/notice_board2.webp">
            <option value="img/common/nurse_office.webp">
            <option value="img/common/office.webp">
            <option value="img/common/office2.webp">
            <option value="img/common/office2_blur.webp">
            <option value="img/common/open_door_room.webp">
            <option value="img/common/other_cafe.webp">
            <option value="img/common/other_cafe_blur.webp">
            <option value="img/common/parking.webp">
            <option value="img/common/park_water.webp">
            <option value="img/common/pc_room.webp">
            <option value="img/common/pc_room2.webp">
            <option value="img/common/pc_room_bath.webp">
            <option value="img/common/pc_room_kitchen.webp">
            <option value="img/common/pc_room_window.webp">
            <option value="img/common/pc_room_window_night.webp">
            <option value="img/common/pet_store.webp">
            <option value="img/common/police_outside.webp">
            <option value="img/common/police_station.webp">
            <option value="img/common/pool_1.webp">
            <option value="img/common/pub.webp">
            <option value="img/common/public_transport_crowd.webp">
            <option value="img/common/pub_inside.webp">
            <option value="img/common/pub_night.webp">
            <option value="img/common/restaurante.webp">
            <option value="img/common/riverside_1.webp">
            <option value="img/common/roof.webp">
            <option value="img/common/rural_1.webp">
            <option value="img/common/rural_2.webp">
            <option value="img/common/rural_3.webp">
            <option value="img/common/rural_4.webp">
            <option value="img/common/rural_5.webp">
            <option value="img/common/rural_6.webp">
            <option value="img/common/sauna.webp">
            <option value="img/common/school_basement.webp">
            <option value="img/common/school_basement_entry.webp">
            <option value="img/common/school_basement_entry_dark.webp">
            <option value="img/common/school_basket.webp">
            <option value="img/common/school_basket_night.webp">
            <option value="img/common/school_bored.webp">
            <option value="img/common/school_coridor.webp">
            <option value="img/common/school_coridor2.webp">
            <option value="img/common/school_coridor2_dark.webp">
            <option value="img/common/school_coridor3.webp">
            <option value="img/common/school_coridor3_dark.webp">
            <option value="img/common/school_coridor_full.webp">
            <option value="img/common/school_coridor_night.webp">
            <option value="img/common/school_entry.webp">
            <option value="img/common/school_entry2.webp">
            <option value="img/common/school_entry2_afternoon.webp">
            <option value="img/common/school_entry2_night.webp">
            <option value="img/common/school_exit.webp">
            <option value="img/common/school_exit_night.webp">
            <option value="img/common/school_office.webp">
            <option value="img/common/school_office2.webp">
            <option value="img/common/school_wc.webp">
            <option value="img/common/shop_back.webp">
            <option value="img/common/shop_camping.webp">
            <option value="img/common/shop_changing.webp">
            <option value="img/common/shop_clothes1.webp">
            <option value="img/common/shop_clothes2.webp">
            <option value="img/common/shop_clothes3.webp">
            <option value="img/common/shop_comic.webp">
            <option value="img/common/shop_exit.webp">
            <option value="img/common/shop_general.webp">
            <option value="img/common/shop_lingerie.webp">
            <option value="img/common/shop_mart.webp">
            <option value="img/common/shop_mart2.webp">
            <option value="img/common/shop_sexshop.webp">
            <option value="img/common/shop_sport.webp">
            <option value="img/common/showers.webp">
            <option value="img/common/showers2.webp">
            <option value="img/common/showers_dark.webp">
            <option value="img/common/sidewalk.webp">
            <option value="img/common/sidewalk_night.webp">
            <option value="img/common/sidewalk_rain.webp">
            <option value="img/common/sleep.webp">
            <option value="img/common/sleep_blur.webp">
            <option value="img/common/slums.webp">
            <option value="img/common/slums_night.webp">
            <option value="img/common/slum_fuck.webp">
            <option value="img/common/slum_fuck_blur.webp">
            <option value="img/common/slum_inside.webp">
            <option value="img/common/slum_wall.webp">
            <option value="img/common/slum_wall2.webp">
            <option value="img/common/spa.webp">
            <option value="img/common/spa_night.webp">
            <option value="img/common/spook1.webp">
            <option value="img/common/spook2.webp">
            <option value="img/common/stairwell.webp">
            <option value="img/common/stairwell_dark.webp">
            <option value="img/common/stands.webp">
            <option value="img/common/storage.webp">
            <option value="img/common/storage_check_out.webp">
            <option value="img/common/storage_corridor.webp">
            <option value="img/common/storage_dark.webp">
            <option value="img/common/storage_sleep.webp">
            <option value="img/common/tattooo_place.webp">
            <option value="img/common/track_n_field.webp">
            <option value="img/common/track_n_field_dark.webp">
            <option value="img/common/vending_machine.webp">
            <option value="img/common/wc_men.webp">
            <option value="img/convention/balcony.webp">
            <option value="img/convention/bar.webp">
            <option value="img/convention/corridor.webp">
            <option value="img/convention/cosplayers.webp">
            <option value="img/convention/cosplayers2.webp">
            <option value="img/convention/crowd.webp">
            <option value="img/convention/crowd2.webp">
            <option value="img/convention/crowd_blur.webp">
            <option value="img/convention/emily_bj.webp">
            <option value="img/convention/emily_bj2.webp">
            <option value="img/convention/gabie_bj.webp">
            <option value="img/convention/gabie_bj2.webp">
            <option value="img/convention/leias.webp">
            <option value="img/convention/line.webp">
            <option value="img/convention/vip.webp">
            <option value="img/convention/wc.webp">
            <option value="img/day_1/bath.webp">
            <option value="img/day_1/bath2.webp">
            <option value="img/day_1/continue1.webp">
            <option value="img/day_1/continue2.webp">
            <option value="img/day_1/cream.webp">
            <option value="img/day_1/doc_pose.webp">
            <option value="img/day_1/doc_pose_photo.webp">
            <option value="img/day_1/examine.webp">
            <option value="img/day_1/lib_desk.webp">
            <option value="img/day_1/lib_peek.webp">
            <option value="img/day_1/lib_pose.webp">
            <option value="img/day_1/lib_pose2.webp">
            <option value="img/day_1/lib_skirt.webp">
            <option value="img/day_1/lib_study.webp">
            <option value="img/day_1/lib_top.webp">
            <option value="img/day_1/money.webp">
            <option value="img/day_1/money2.webp">
            <option value="img/day_1/skirt_1.webp">
            <option value="img/day_1/skirt_2.webp">
            <option value="img/day_1/strawbery.webp">
            <option value="img/day_1/strip_1.webp">
            <option value="img/day_1/strip_2.webp">
            <option value="img/day_1/up_skirt_black.webp">
            <option value="img/day_1/up_skirt_commando.webp">
            <option value="img/day_1/up_skirt_pink.webp">
            <option value="img/day_1/up_skirt_white.webp">
            <option value="img/day_10/broken_bus.webp">
            <option value="img/day_10/tryout.webp">
            <option value="img/day_10/tryout_anal1.webp">
            <option value="img/day_10/tryout_anal2.webp">
            <option value="img/day_10/tryout_anal3.webp">
            <option value="img/day_10/tryout_anal4.webp">
            <option value="img/day_10/tryout_anal5.webp">
            <option value="img/day_11/bio_class.webp">
            <option value="img/day_13/ben.webp">
            <option value="img/day_13/ben_blur.webp">
            <option value="img/day_13/ben_tbc.webp">
            <option value="img/day_13/bodybag.webp">
            <option value="img/day_13/forest_blur1.webp">
            <option value="img/day_13/forest_blur2.webp">
            <option value="img/day_13/jeff_anal.webp">
            <option value="img/day_13/jeff_anal_cum.webp">
            <option value="img/day_13/jeff_night.webp">
            <option value="img/day_13/jeff_zuza_emily_1.webp">
            <option value="img/day_13/jeff_zuza_emily_cum1.webp">
            <option value="img/day_13/jeff_zuza_emily_cum2.webp">
            <option value="img/day_13/shower.webp">
            <option value="img/day_13/shower2.webp">
            <option value="img/day_13/zuza_sex.webp">
            <option value="img/day_13/zuza_sex_b1.webp">
            <option value="img/day_13/zuza_sex_b2.webp">
            <option value="img/day_13/zuza_strip1.webp">
            <option value="img/day_13/zuza_strip2.webp">
            <option value="img/day_14/bdms1.webp">
            <option value="img/day_14/bdms1_cctv.webp">
            <option value="img/day_14/bdms2.webp">
            <option value="img/day_14/bdms3.webp">
            <option value="img/day_14/bj1.webp">
            <option value="img/day_14/bj2.webp">
            <option value="img/day_14/bus.webp">
            <option value="img/day_14/class_pose.webp">
            <option value="img/day_14/morning_2x_bj.webp">
            <option value="img/day_14/morning_2x_bj_cum.webp">
            <option value="img/day_14/morning_bj.webp">
            <option value="img/day_14/morning_jeff.webp">
            <option value="img/day_14/morning_zuza.webp">
            <option value="img/day_14/morning_zuza_blur.webp">
            <option value="img/day_14/peek_out.webp">
            <option value="img/day_14/peek_out2.webp">
            <option value="img/day_14/teacher_threesome.webp">
            <option value="img/day_14/teacher_threesome2.webp">
            <option value="img/day_15/food.webp">
            <option value="img/day_15/food2.webp">
            <option value="img/day_15/food3.webp">
            <option value="img/day_15/hm_bj.webp">
            <option value="img/day_15/hm_bj_cum.webp">
            <option value="img/day_15/morning1.webp">
            <option value="img/day_15/morning2.webp">
            <option value="img/day_15/phone.webp">
            <option value="img/day_17/breakfast.webp">
            <option value="img/day_17/hm_bj.webp">
            <option value="img/day_18/bus_grab.webp">
            <option value="img/day_18/bus_grab2.webp">
            <option value="img/day_18/car_legs.webp">
            <option value="img/day_18/car_pussy.webp">
            <option value="img/day_18/changing_room.webp">
            <option value="img/day_18/class_bj.webp">
            <option value="img/day_18/class_bj2.webp">
            <option value="img/day_18/class_bj3.webp">
            <option value="img/day_18/class_pose1.webp">
            <option value="img/day_18/class_pose2.webp">
            <option value="img/day_18/class_pose3.webp">
            <option value="img/day_18/class_pose3_finger1.webp">
            <option value="img/day_18/class_pose3_finger2.webp">
            <option value="img/day_18/class_pose3_finger3.webp">
            <option value="img/day_18/class_pose3_finger4.webp">
            <option value="img/day_18/class_pose3_finger5.webp">
            <option value="img/day_18/class_pose4.webp">
            <option value="img/day_18/corridor_lmum.webp">
            <option value="img/day_18/diego_bj.webp">
            <option value="img/day_18/diego_cum.webp">
            <option value="img/day_18/diego_hj.webp">
            <option value="img/day_18/dream_1.webp">
            <option value="img/day_18/dream_10.webp">
            <option value="img/day_18/dream_11.webp">
            <option value="img/day_18/dream_12.webp">
            <option value="img/day_18/dream_2.webp">
            <option value="img/day_18/dream_3.webp">
            <option value="img/day_18/dream_4.webp">
            <option value="img/day_18/dream_5.webp">
            <option value="img/day_18/dream_6.webp">
            <option value="img/day_18/dream_7.webp">
            <option value="img/day_18/dream_8.webp">
            <option value="img/day_18/dream_9.webp">
            <option value="img/day_18/fey.webp">
            <option value="img/day_18/fey0.webp">
            <option value="img/day_18/fey1.webp">
            <option value="img/day_18/forest_spring.webp">
            <option value="img/day_18/forest_spring1.webp">
            <option value="img/day_18/hm_bj.webp">
            <option value="img/day_18/hm_bj2.webp">
            <option value="img/day_18/hm_bj_cum.webp">
            <option value="img/day_18/hotel_bj.webp">
            <option value="img/day_18/hotel_sleep.webp">
            <option value="img/day_18/hotel_sleep_dark.webp">
            <option value="img/day_18/lenard_fuck.webp">
            <option value="img/day_18/lenard_fuck_cum.webp">
            <option value="img/day_18/mall_walk1.webp">
            <option value="img/day_18/math1.webp">
            <option value="img/day_18/math2.webp">
            <option value="img/day_18/math3.webp">
            <option value="img/day_18/math3_embarrassed.webp">
            <option value="img/day_18/math3_excited.webp">
            <option value="img/day_18/math4.webp">
            <option value="img/day_18/note.webp">
            <option value="img/day_18/note2.webp">
            <option value="img/day_18/on_bed1.webp">
            <option value="img/day_18/on_bed2.webp">
            <option value="img/day_18/parking_from_car.webp">
            <option value="img/day_18/park_dusk.webp">
            <option value="img/day_18/park_morning.webp">
            <option value="img/day_18/park_night.webp">
            <option value="img/day_18/pond_rest.webp">
            <option value="img/day_18/school_night_shower.webp">
            <option value="img/day_18/school_sleep.webp">
            <option value="img/day_18/school_sleep_wet.webp">
            <option value="img/day_18/slums_bedroom.webp">
            <option value="img/day_18/slums_sleep.webp">
            <option value="img/day_18/slums_sleep_dark.webp">
            <option value="img/day_18/slums_wake.webp">
            <option value="img/day_18/spook1.webp">
            <option value="img/day_18/sundown.webp">
            <option value="img/day_18/wc_bj.webp">
            <option value="img/day_18/wc_bj2.webp">
            <option value="img/day_18/wc_bj3.webp">
            <option value="img/day_18/window.webp">
            <option value="img/day_18/wolf.webp">
            <option value="img/day_18/wolf_bj.xxx">
            <option value="img/day_18/wolf_bj_cum.xxx">
            <option value="img/day_18/wolf_derp.webp">
            <option value="img/day_18/wolf_fuk.xxx">
            <option value="img/day_18/wolf_lick.webp">
            <option value="img/day_19/beach_bush.webp">
            <option value="img/day_19/breakfast.webp">
            <option value="img/day_19/dumpster.webp">
            <option value="img/day_19/dumpster2.webp">
            <option value="img/day_19/food.webp">
            <option value="img/day_19/forest_bj.webp">
            <option value="img/day_19/forest_bj2.webp">
            <option value="img/day_19/janitor_ass_cum.webp">
            <option value="img/day_19/janitor_bj.webp">
            <option value="img/day_19/janitor_pussy_cum.webp">
            <option value="img/day_19/later.webp">
            <option value="img/day_19/lenard_dad_1.webp">
            <option value="img/day_19/lenard_dad_2.webp">
            <option value="img/day_19/lenard_dad_3.webp">
            <option value="img/day_19/lenard_dad_4.webp">
            <option value="img/day_19/lenard_dad_5.webp">
            <option value="img/day_19/lenard_dad_6.webp">
            <option value="img/day_19/lenard_dad_7.webp">
            <option value="img/day_19/lenard_dad_7a.webp">
            <option value="img/day_19/lenard_dad_8.webp">
            <option value="img/day_19/lenard_dad_8a.webp">
            <option value="img/day_19/lenard_dad_9.webp">
            <option value="img/day_19/lenard_end.webp">
            <option value="img/day_19/lenard_morning_0.webp">
            <option value="img/day_19/lenard_morning_1.webp">
            <option value="img/day_19/lenard_morning_2.webp">
            <option value="img/day_19/lenard_morning_3.webp">
            <option value="img/day_19/lenard_morning_4.webp">
            <option value="img/day_19/lenard_morning_bj.webp">
            <option value="img/day_19/lenard_morning_bj_cum.webp">
            <option value="img/day_19/night.webp">
            <option value="img/day_19/night_end.webp">
            <option value="img/day_19/nudist1.webp">
            <option value="img/day_19/nudist2.webp">
            <option value="img/day_19/nudist3.webp">
            <option value="img/day_19/parking.webp">
            <option value="img/day_19/parking2.webp">
            <option value="img/day_19/parking3.webp">
            <option value="img/day_19/parking4.webp">
            <option value="img/day_19/parking5.webp">
            <option value="img/day_19/parking6.webp">
            <option value="img/day_19/parking_base.webp">
            <option value="img/day_19/park_morning.webp">
            <option value="img/day_19/park_morning2.webp">
            <option value="img/day_19/park_morning3.webp">
            <option value="img/day_19/park_morning4.webp">
            <option value="img/day_19/park_morning5.webp">
            <option value="img/day_19/park_morning6.webp">
            <option value="img/day_19/park_wolfie0.webp">
            <option value="img/day_19/park_wolfie1.webp">
            <option value="img/day_19/park_wolfie2.webp">
            <option value="img/day_19/pool.webp">
            <option value="img/day_19/pool_1.webp">
            <option value="img/day_19/pool_2.webp">
            <option value="img/day_19/pool_bj.webp">
            <option value="img/day_19/pool_bj1.webp">
            <option value="img/day_19/pool_bj2.webp">
            <option value="img/day_19/pool_bj3.webp">
            <option value="img/day_19/pool_bj4.webp">
            <option value="img/day_19/pool_bj5.webp">
            <option value="img/day_19/pool_bj6.webp">
            <option value="img/day_19/pool_bj7.webp">
            <option value="img/day_19/pool_bj_start.webp">
            <option value="img/day_19/room_fuck.webp">
            <option value="img/day_19/room_pose.webp">
            <option value="img/day_19/room_service.webp">
            <option value="img/day_19/room_service1.webp">
            <option value="img/day_19/school_gangbang1.webp">
            <option value="img/day_19/school_gangbang2.webp">
            <option value="img/day_19/school_gangbang3.webp">
            <option value="img/day_19/school_gangbang4.webp">
            <option value="img/day_19/school_gangbang5.webp">
            <option value="img/day_19/school_gangbang6.webp">
            <option value="img/day_19/school_gangbang_cum.webp">
            <option value="img/day_19/school_gangbang_end.webp">
            <option value="img/day_19/school_wakeup.webp">
            <option value="img/day_19/school_wakeup1.webp">
            <option value="img/day_19/school_wakeup2.webp">
            <option value="img/day_19/slum_facefuck.webp">
            <option value="img/day_19/slum_facefuck_cum.webp">
            <option value="img/day_19/slum_fingered.webp">
            <option value="img/day_19/slum_fuck1.webp">
            <option value="img/day_19/slum_fuck2.webp">
            <option value="img/day_19/slum_fuck3.webp">
            <option value="img/day_19/slum_fuck4.webp">
            <option value="img/day_19/slum_gag.webp">
            <option value="img/day_19/slum_no_gag.webp">
            <option value="img/day_19/slum_room.webp">
            <option value="img/day_19/slum_tied.webp">
            <option value="img/day_19/slum_tied1.webp">
            <option value="img/day_19/slum_tied2.webp">
            <option value="img/day_19/sneak_out.webp">
            <option value="img/day_19/storage_finger.webp">
            <option value="img/day_19/tied.webp">
            <option value="img/day_19/tied1.webp">
            <option value="img/day_19/tied2.webp">
            <option value="img/day_19/tied3.webp">
            <option value="img/day_19/tied4.webp">
            <option value="img/day_19/tunel.webp">
            <option value="img/day_19/tunel2.webp">
            <option value="img/day_19/tunel3.webp">
            <option value="img/day_19/tunel_exit.webp">
            <option value="img/day_2/ben_bj.webp">
            <option value="img/day_2/ben_bj_swallow.webp">
            <option value="img/day_2/bus_grope1.webp">
            <option value="img/day_2/bus_grope2.webp">
            <option value="img/day_2/bus_grope3.webp">
            <option value="img/day_2/corridor_towel.webp">
            <option value="img/day_2/cum_drink.webp">
            <option value="img/day_2/cum_glass.webp">
            <option value="img/day_2/cum_pie.webp">
            <option value="img/day_2/eat_cum_cake.webp">
            <option value="img/day_2/hot_cum_dog.webp">
            <option value="img/day_2/jeff_anal.webp">
            <option value="img/day_2/jeff_bj.webp">
            <option value="img/day_2/jeff_grab.webp">
            <option value="img/day_2/jeff_pre_sex.webp">
            <option value="img/day_2/jeff_sex.webp">
            <option value="img/day_2/later.webp">
            <option value="img/day_2/locker_1.webp">
            <option value="img/day_2/locker_2.webp">
            <option value="img/day_2/locker_3.webp">
            <option value="img/day_2/locker_strip.webp">
            <option value="img/day_2/maths.webp">
            <option value="img/day_2/nurse_office_b1.webp">
            <option value="img/day_2/nurse_office_b2.webp">
            <option value="img/day_2/nurse_office_b3.webp">
            <option value="img/day_2/pe_shower.webp">
            <option value="img/day_2/pe_shower2.webp">
            <option value="img/day_2/pe_shower3.webp">
            <option value="img/day_2/pe_shower4.webp">
            <option value="img/day_2/track_n_field_fade.webp">
            <option value="img/day_2/track_n_field_fade2.webp">
            <option value="img/day_2/wet_by_window.webp">
            <option value="img/day_20/end.webp">
            <option value="img/day_20/film_1.webp">
            <option value="img/day_20/film_10.webp">
            <option value="img/day_20/film_11.webp">
            <option value="img/day_20/film_12.webp">
            <option value="img/day_20/film_13.webp">
            <option value="img/day_20/film_14.webp">
            <option value="img/day_20/film_15.webp">
            <option value="img/day_20/film_16.webp">
            <option value="img/day_20/film_17.webp">
            <option value="img/day_20/film_18.webp">
            <option value="img/day_20/film_19.webp">
            <option value="img/day_20/film_2.webp">
            <option value="img/day_20/film_20.webp">
            <option value="img/day_20/film_21.webp">
            <option value="img/day_20/film_22.webp">
            <option value="img/day_20/film_23.webp">
            <option value="img/day_20/film_24.webp">
            <option value="img/day_20/film_3.webp">
            <option value="img/day_20/film_4.webp">
            <option value="img/day_20/film_5.webp">
            <option value="img/day_20/film_6.webp">
            <option value="img/day_20/film_7.webp">
            <option value="img/day_20/film_8.webp">
            <option value="img/day_20/film_9.webp">
            <option value="img/day_20/lenard_morning.webp">
            <option value="img/day_20/lenard_morning1.webp">
            <option value="img/day_20/lenard_morning2.webp">
            <option value="img/day_20/lenard_morning3.webp">
            <option value="img/day_20/lenard_morning4.webp">
            <option value="img/day_20/lenard_morning5.webp">
            <option value="img/day_20/lenard_morning6.webp">
            <option value="img/day_20/lenard_morning7.webp">
            <option value="img/day_20/lenard_morning_cum.webp">
            <option value="img/day_20/lenard_phone.webp">
            <option value="img/day_20/mum_porn_1.webp">
            <option value="img/day_20/mum_porn_10.webp">
            <option value="img/day_20/mum_porn_11.webp">
            <option value="img/day_20/mum_porn_2.webp">
            <option value="img/day_20/mum_porn_3.webp">
            <option value="img/day_20/mum_porn_4.webp">
            <option value="img/day_20/mum_porn_5.webp">
            <option value="img/day_20/mum_porn_6.webp">
            <option value="img/day_20/mum_porn_7.webp">
            <option value="img/day_20/mum_porn_8.webp">
            <option value="img/day_20/mum_porn_9.webp">
            <option value="img/day_20/mum_porn_boot.webp">
            <option value="img/day_20/taxi.webp">
            <option value="img/day_3/dream.xxx">
            <option value="img/day_3/dream_blur.webp">
            <option value="img/day_3/jeff_bj.webp">
            <option value="img/day_3/jeff_pose.webp">
            <option value="img/day_3/shower.webp">
            <option value="img/day_3/wake_up.webp">
            <option value="img/day_3/wc_boobs.webp">
            <option value="img/day_3/wc_facial.webp">
            <option value="img/day_4/anathomy_1.webp">
            <option value="img/day_4/anathomy_2.webp">
            <option value="img/day_4/anathomy_3.webp">
            <option value="img/day_4/anathomy_4.webp">
            <option value="img/day_4/anathomy_5.webp">
            <option value="img/day_4/bus_expo.webp">
            <option value="img/day_4/bus_expo_stop.webp">
            <option value="img/day_4/bus_expo_stop_school.webp">
            <option value="img/day_4/class_trip.webp">
            <option value="img/day_4/panties_black.webp">
            <option value="img/day_4/panties_down_black.webp">
            <option value="img/day_4/panties_down_pink.webp">
            <option value="img/day_4/panties_down_white.webp">
            <option value="img/day_4/panties_pink.webp">
            <option value="img/day_4/panties_pull_black.webp">
            <option value="img/day_4/panties_pull_pink.webp">
            <option value="img/day_4/panties_pull_white.webp">
            <option value="img/day_4/panties_white.webp">
            <option value="img/day_4/roof_boobs.webp">
            <option value="img/day_4/roof_nude.webp">
            <option value="img/day_4/under_desk_shy.webp">
            <option value="img/day_4/under_desk_slut.webp">
            <option value="img/day_7/anathomy_front.webp">
            <option value="img/day_7/ben_call.webp">
            <option value="img/day_7/city_day_drug.webp">
            <option value="img/day_7/gta.webp">
            <option value="img/day_7/hooker_anal.webp">
            <option value="img/day_7/hooker_anal_cum.webp">
            <option value="img/day_7/hooker_anal_finger.webp">
            <option value="img/day_7/hooker_bj.webp">
            <option value="img/day_7/hooker_bj_cum.webp">
            <option value="img/day_7/hooker_fck.webp">
            <option value="img/day_7/hooker_fck_cum.webp">
            <option value="img/day_7/no_car.webp">
            <option value="img/day_7/parked_car.webp">
            <option value="img/day_7/slum_hookers.webp">
            <option value="img/day_7/slum_hookers_schl.webp">
            <option value="img/day_7/wet.webp">
            <option value="img/day_7/wet_blur.webp">
            <option value="img/day_9/gokkun_0.webp">
            <option value="img/day_9/gokkun_1.webp">
            <option value="img/day_9/gokkun_2.webp">
            <option value="img/day_9/gokkun_3.webp">
            <option value="img/day_9/gokkun_4.webp">
            <option value="img/day_9/gokkun_5.webp">
            <option value="img/day_9/gokkun_6.webp">
            <option value="img/day_9/gokkun_7.webp">
            <option value="img/day_9/gokkun_8.webp">
            <option value="img/day_9/gokkun_9.webp">
            <option value="img/day_9/zuza_bj.webp">
            <option value="img/day_9/zuza_bj_x2.webp">
            <option value="img/day_9/zuza_bj_x2_2.webp">
            <option value="img/day_9/zuza_bj_x2_cum.webp">
            <option value="img/day_9/zuza_cum_kiss.webp">
            <option value="img/day_9/zuza_lick.webp">
            <option value="img/day_9/zuza_look.webp">
            <option value="img/disco/lit_1.webp">
            <option value="img/disco/lit_2.webp">
            <option value="img/disco/lit_3.webp">
            <option value="img/disco/lit_4.webp">
            <option value="img/disco/lit_5.webp">
            <option value="img/dream/ball.webp">
            <option value="img/dream/ball2.webp">
            <option value="img/dream/information.webp">
            <option value="img/dream/in_water.webp">
            <option value="img/dream/river.webp">
            <option value="img/dream/river_ir.webp">
            <option value="img/food/breakfast_1.webp">
            <option value="img/food/breakfast_2.webp">
            <option value="img/food/breakfast_3.webp">
            <option value="img/food/breakfast_4.webp">
            <option value="img/food/breakfast_5.webp">
            <option value="img/food/diner_1.webp">
            <option value="img/food/diner_2.webp">
            <option value="img/food/diner_3.webp">
            <option value="img/food/diner_4.webp">
            <option value="img/food/diner_5.webp">
            <option value="img/food/diner_6.webp">
            <option value="img/food/diner_7.webp">
            <option value="img/food/fridge_full.webp">
            <option value="img/food/sooub.webp">
            <option value="img/food/wzk.webp">
            <option value="img/fx/bus_bg.webp">
            <option value="img/fx/fog.webp">
            <option value="img/fx/night_crime_blue.webp">
            <option value="img/fx/night_crime_red.webp">
            <option value="img/fx/rain.webp">
            <option value="img/fx/rain2.webp">
            <option value="img/gh_day/morning559.webp">
            <option value="img/gh_day/morning600.webp">
            <option value="img/hooker/anal_1.webp">
            <option value="img/hooker/anal_2.webp">
            <option value="img/hooker/bj_1.webp">
            <option value="img/hooker/bj_2.webp">
            <option value="img/hooker/cleanup.webp">
            <option value="img/hooker/normal_1.webp">
            <option value="img/hooker/normal_2.webp">
            <option value="img/hooker/pimp_anal.webp">
            <option value="img/hooker/pimp_bj.webp">
            <option value="img/hooker/pimp_fuck.webp">
            <option value="img/lenards/bb_pool.webp">
            <option value="img/lenards/bb_pool2.webp">
            <option value="img/lenards/bedroom.webp">
            <option value="img/lenards/bedroom_dark.webp">
            <option value="img/lenards/corridor.webp">
            <option value="img/lenards/cum_coctail.webp">
            <option value="img/lenards/door.webp">
            <option value="img/lenards/drink_cum.webp">
            <option value="img/lenards/driveway.webp">
            <option value="img/lenards/ffm.webp">
            <option value="img/lenards/ffm1.webp">
            <option value="img/lenards/ffm2.webp">
            <option value="img/lenards/ffm3.webp">
            <option value="img/lenards/girls.webp">
            <option value="img/lenards/girl_on_girl1.webp">
            <option value="img/lenards/girl_on_girl2.webp">
            <option value="img/lenards/girl_on_girl_pool.webp">
            <option value="img/lenards/home_bj.webp">
            <option value="img/lenards/home_bj_cum.webp">
            <option value="img/lenards/kiss.webp">
            <option value="img/lenards/kitchen.webp">
            <option value="img/lenards/kitchen_dark.webp">
            <option value="img/lenards/kitchen_night.webp">
            <option value="img/lenards/kneel.webp">
            <option value="img/lenards/kneel_pet.webp">
            <option value="img/lenards/mmf.webp">
            <option value="img/lenards/mmf_2.webp">
            <option value="img/lenards/mmf_cum.webp">
            <option value="img/lenards/morning_bj.webp">
            <option value="img/lenards/photo_shoot_1.webp">
            <option value="img/lenards/photo_shoot_2.webp">
            <option value="img/lenards/photo_shoot_3.webp">
            <option value="img/lenards/photo_shoot_4.webp">
            <option value="img/lenards/pool.webp">
            <option value="img/lenards/pool_bj.webp">
            <option value="img/lenards/pool_blur.webp">
            <option value="img/lenards/stairs.webp">
            <option value="img/lenards/stairs_dark.webp">
            <option value="img/lenard_date/anal_outdoor.webp">
            <option value="img/lenard_date/anal_outdoor_dark.webp">
            <option value="img/lenard_date/anal_outdoor_sunset.webp">
            <option value="img/lenard_date/back_stage.webp">
            <option value="img/lenard_date/bed_cumshot.webp">
            <option value="img/lenard_date/bed_pose_1.webp">
            <option value="img/lenard_date/bed_pose_2.webp">
            <option value="img/lenard_date/bed_pose_3.webp">
            <option value="img/lenard_date/bed_pose_4.webp">
            <option value="img/lenard_date/bj.webp">
            <option value="img/lenard_date/bj_bouncer.webp">
            <option value="img/lenard_date/bj_cum.webp">
            <option value="img/lenard_date/car.webp">
            <option value="img/lenard_date/drinks.webp">
            <option value="img/lenard_date/drive.webp">
            <option value="img/lenard_date/drive_night.webp">
            <option value="img/lenard_date/eat_cum.webp">
            <option value="img/lenard_date/food.webp">
            <option value="img/lenard_date/hotel_cleanup.webp">
            <option value="img/lenard_date/hotel_facial.webp">
            <option value="img/lenard_date/hotel_fuck.webp">
            <option value="img/lenard_date/hotel_lobby.webp">
            <option value="img/lenard_date/hotel_oral.webp">
            <option value="img/lenard_date/hotel_parking.webp">
            <option value="img/lenard_date/hotel_room.webp">
            <option value="img/lenard_date/mc_dance1.webp">
            <option value="img/lenard_date/mc_dance2.webp">
            <option value="img/lenard_date/sex_in_bed.webp">
            <option value="img/lenard_date/stage_lit.webp">
            <option value="img/lenard_date/stripper1.webp">
            <option value="img/lenard_date/table.webp">
            <option value="img/lenard_date/tiramisu.webp">
            <option value="img/marcos/bathroom.webp">
            <option value="img/marcos/books.webp">
            <option value="img/marcos/corridor.webp">
            <option value="img/marcos/end_1.webp">
            <option value="img/marcos/end_2.webp">
            <option value="img/marcos/front_day.webp">
            <option value="img/marcos/front_door.webp">
            <option value="img/marcos/front_night.webp">
            <option value="img/marcos/gabie_in_bed1.webp">
            <option value="img/marcos/gabie_in_bed2.webp">
            <option value="img/marcos/gabie_morning.webp">
            <option value="img/marcos/gabie_morning_blur1.webp">
            <option value="img/marcos/gabie_morning_blur2.webp">
            <option value="img/marcos/gabie_on_bottom.webp">
            <option value="img/marcos/gabie_on_top.webp">
            <option value="img/marcos/gabie_on_video.webp">
            <option value="img/marcos/gabie_sleep.webp">
            <option value="img/marcos/gabie_sleep_blur.webp">
            <option value="img/marcos/kiss.webp">
            <option value="img/marcos/photo.webp">
            <option value="img/marcos/pose.webp">
            <option value="img/marcos/sheet1.webp">
            <option value="img/marcos/sheet2.webp">
            <option value="img/marcos/sheet3.webp">
            <option value="img/marcos/sofa_room.webp">
            <option value="img/marcos/welcome_1.webp">
            <option value="img/marcos/welcome_2.webp">
            <option value="img/marcos/welcome_3.webp">
            <option value="img/marcos/welcome_4.webp">
            <option value="img/new_home/balcony.webp">
            <option value="img/new_home/balcony_night.webp">
            <option value="img/new_home/bathroom.webp">
            <option value="img/new_home/bathroom2.webp">
            <option value="img/new_home/bathroom_night.webp">
            <option value="img/new_home/entrance.webp">
            <option value="img/new_home/entrance_night.webp">
            <option value="img/new_home/outside.webp">
            <option value="img/new_home/outside_night.webp">
            <option value="img/new_home/outside_zoom.webp">
            <option value="img/new_home/pc_room.webp">
            <option value="img/new_home/pc_room_dark.webp">
            <option value="img/new_home/pc_room_night.webp">
            <option value="img/park/bj_anal.webp">
            <option value="img/park/bj_anal_cum.webp">
            <option value="img/park/bj_peek.webp">
            <option value="img/park/bj_peek2.webp">
            <option value="img/park/bj_x2.webp">
            <option value="img/park/blue_coat1.webp">
            <option value="img/park/blue_coat2.webp">
            <option value="img/park/bridge_bg.webp">
            <option value="img/park/bridge_nude.webp">
            <option value="img/park/dog_bj.xxx">
            <option value="img/park/dog_bj2.xxx">
            <option value="img/park/dog_bj2_night.xxx">
            <option value="img/park/dog_bj_night.xxx">
            <option value="img/park/forest.webp">
            <option value="img/park/forest_night_lights.webp">
            <option value="img/park/fuk_showt.xxx">
            <option value="img/park/fuk_show_night.xxx">
            <option value="img/park/in_grass.webp">
            <option value="img/park/lake_night.webp">
            <option value="img/park/mc_doggo_fuk.xxx">
            <option value="img/park/mc_doggo_fuk_night.xxx">
            <option value="img/park/meadow.webp">
            <option value="img/park/meadow_dark.webp">
            <option value="img/park/night.webp">
            <option value="img/park/night_show.xxx">
            <option value="img/park/nude_wall.webp">
            <option value="img/park/nude_wall_tourists.webp">
            <option value="img/park/park.webp">
            <option value="img/park/park_night.webp">
            <option value="img/park/rocket.xxx">
            <option value="img/park/rocket_night.xxx">
            <option value="img/park/stairs_bg.webp">
            <option value="img/park/stairs_tourist.webp">
            <option value="img/park/standing_stones.webp">
            <option value="img/park/stones_night.webp">
            <option value="img/park/stones_night_expo.webp">
            <option value="img/park/stones_occult.webp">
            <option value="img/park/wild.webp">
            <option value="img/park/wild_night.webp">
            <option value="img/plug/ball_and_chain.webp">
            <option value="img/plug/black.webp">
            <option value="img/plug/black_round.webp">
            <option value="img/plug/bunny_black.webp">
            <option value="img/plug/bunny_white.webp">
            <option value="img/plug/cage.webp">
            <option value="img/plug/gape.webp">
            <option value="img/plug/gem.webp">
            <option value="img/plug/heart.webp">
            <option value="img/plug/ico_ball.webp">
            <option value="img/plug/ico_black_cock.webp">
            <option value="img/plug/ico_bunny_black.webp">
            <option value="img/plug/ico_bunny_white.webp">
            <option value="img/plug/ico_cage.webp">
            <option value="img/plug/ico_cone.webp">
            <option value="img/plug/ico_fat.webp">
            <option value="img/plug/ico_gem.webp">
            <option value="img/plug/ico_gem_long.webp">
            <option value="img/plug/ico_heart.webp">
            <option value="img/plug/ico_knot.webp">
            <option value="img/plug/ico_long.webp">
            <option value="img/plug/ico_metal_tunel.webp">
            <option value="img/plug/ico_none.webp">
            <option value="img/plug/ico_plastic.webp">
            <option value="img/plug/ico_plastic2.webp">
            <option value="img/plug/ico_screw.webp">
            <option value="img/plug/ico_tail.webp">
            <option value="img/plug/ico_tail2.webp">
            <option value="img/plug/ico_transparent.webp">
            <option value="img/plug/ico_vibro.gif">
            <option value="img/plug/ico_vibro.webp">
            <option value="img/plug/ico_xl.webp">
            <option value="img/plug/metal_tunel.webp">
            <option value="img/plug/paw.webp">
            <option value="img/plug/pink_plastic.webp">
            <option value="img/plug/plastic.webp">
            <option value="img/plug/plastic_hollow.webp">
            <option value="img/plug/plugin.webp">
            <option value="img/plug/plugin2.webp">
            <option value="img/plug/plug_icon.webp">
            <option value="img/plug/queen_of_spades.webp">
            <option value="img/plug/screw.webp">
            <option value="img/plug/tail_gray.webp">
            <option value="img/plug/tail_red.webp">
            <option value="img/plug/xl.webp">
            <option value="img/police/lit_1.webp">
            <option value="img/police/lit_2.webp">
            <option value="img/prologue/bus_phone.webp">
            <option value="img/prologue/cheap_thugs.webp">
            <option value="img/prologue/cop_at_door.webp">
            <option value="img/prologue/crime_scene.webp">
            <option value="img/prologue/cumshot_1.webp">
            <option value="img/prologue/cumshot_2.webp">
            <option value="img/prologue/cum_in_shower.webp">
            <option value="img/prologue/diner.webp">
            <option value="img/prologue/disco.webp">
            <option value="img/prologue/gambling.webp">
            <option value="img/prologue/gambling2.webp">
            <option value="img/prologue/gambling_dead.webp">
            <option value="img/prologue/gift_card200.webp">
            <option value="img/prologue/guy_in_shower.webp">
            <option value="img/prologue/hooker.webp">
            <option value="img/prologue/lecture_torn_skirt.webp">
            <option value="img/prologue/locker_finger.webp">
            <option value="img/prologue/old_home1.webp">
            <option value="img/prologue/old_home2.webp">
            <option value="img/prologue/phone.webp">
            <option value="img/prologue/phone_foot.webp">
            <option value="img/prologue/phone_selfie_1.webp">
            <option value="img/prologue/phone_selfie_2.webp">
            <option value="img/prologue/phone_shool_foot.webp">
            <option value="img/prologue/phone_shool_selfie_1.webp">
            <option value="img/prologue/phone_shool_selfie_2.webp">
            <option value="img/prologue/school_feet_1.webp">
            <option value="img/prologue/school_feet_2.webp">
            <option value="img/prologue/school_feet_3.webp">
            <option value="img/prologue/selfie1.webp">
            <option value="img/prologue/selfie_2.webp">
            <option value="img/prologue/selfie_foot.webp">
            <option value="img/prologue/shower.webp">
            <option value="img/prologue/shower_p_belly1.webp">
            <option value="img/prologue/shower_touch.webp">
            <option value="img/prologue/shower_wet.webp">
            <option value="img/prologue/sms.webp">
            <option value="img/prologue/thug.webp">
            <option value="img/prologue/wc_bj_01.webp">
            <option value="img/prologue/wc_bj_02.webp">
            <option value="img/prologue/wc_bj_03.webp">
            <option value="img/prologue/witness_1.webp">
            <option value="img/prologue/witness_2.webp">
            <option value="img/prologue/witness_3.webp">
            <option value="img/prologue/witness_4.webp">
            <option value="img/pub/bj.webp">
            <option value="img/pub/bj_photo.webp">
            <option value="img/pub/vip.webp">
            <option value="img/school_events/anal_wc.webp">
            <option value="img/school_events/anal_wc_cum.webp">
            <option value="img/school_events/basement_anal.webp">
            <option value="img/school_events/basement_anal_cum.webp">
            <option value="img/school_events/ben_bj.webp">
            <option value="img/school_events/bj_x2.webp">
            <option value="img/school_events/bj_x2_1.webp">
            <option value="img/school_events/bj_x2_cum.webp">
            <option value="img/school_events/bj_zoom.webp">
            <option value="img/school_events/bj_zoom_cum.webp">
            <option value="img/school_events/bus1.webp">
            <option value="img/school_events/cafeteria_nude.webp">
            <option value="img/school_events/cafeteria_overlay_cut.webp">
            <option value="img/school_events/cafeteria_overlay_mini.webp">
            <option value="img/school_events/cafeteria_overlay_panties_black.webp">
            <option value="img/school_events/cafeteria_overlay_panties_pink.webp">
            <option value="img/school_events/cafeteria_overlay_panties_white.webp">
            <option value="img/school_events/cafeteria_overlay_skirt.webp">
            <option value="img/school_events/cafeteria_overlay_top1.webp">
            <option value="img/school_events/cafeteria_overlay_top2.webp">
            <option value="img/school_events/cafeteria_overlay_top3.webp">
            <option value="img/school_events/cafeteria_overlay_top_micro.webp">
            <option value="img/school_events/classroom_bj.webp">
            <option value="img/school_events/classroom_bj_cum.webp">
            <option value="img/school_events/classroom_dp.webp">
            <option value="img/school_events/classroom_dp_cum.webp">
            <option value="img/school_events/classroom_fuck.webp">
            <option value="img/school_events/class_pose.webp">
            <option value="img/school_events/class_trip.webp">
            <option value="img/school_events/corridor2_facial.webp">
            <option value="img/school_events/cumshot.webp">
            <option value="img/school_events/dick_in_face.webp">
            <option value="img/school_events/dick_in_face_cum.webp">
            <option value="img/school_events/door_peek.webp">
            <option value="img/school_events/eat_cum.webp">
            <option value="img/school_events/eat_cum_cake.webp">
            <option value="img/school_events/fat_bj.webp">
            <option value="img/school_events/fat_bj_cum.webp">
            <option value="img/school_events/gh_bbc.webp">
            <option value="img/school_events/gh_bbcock.webp">
            <option value="img/school_events/gh_bbc_cum.webp">
            <option value="img/school_events/gh_jeff.webp">
            <option value="img/school_events/gh_jeff_cum.webp">
            <option value="img/school_events/gh_not_jeff.webp">
            <option value="img/school_events/gh_not_jeff_cum.webp">
            <option value="img/school_events/gh_peek_out.webp">
            <option value="img/school_events/gh_peek_out_cum.webp">
            <option value="img/school_events/gh_wait.webp">
            <option value="img/school_events/gh_wait_cum.webp">
            <option value="img/school_events/gh_wc.webp">
            <option value="img/school_events/grope.webp">
            <option value="img/school_events/grope1.webp">
            <option value="img/school_events/grope2.webp">
            <option value="img/school_events/hm_anal.webp">
            <option value="img/school_events/hm_anal_hit.webp">
            <option value="img/school_events/hm_ass_up.webp">
            <option value="img/school_events/hm_ass_up_plug1.webp">
            <option value="img/school_events/hm_ass_up_plug2.webp">
            <option value="img/school_events/hm_ass_up_plug_cum.webp">
            <option value="img/school_events/hm_ass_up_ready.webp">
            <option value="img/school_events/hm_fist.webp">
            <option value="img/school_events/lenard_bj.webp">
            <option value="img/school_events/lenard_bj2.webp">
            <option value="img/school_events/lick_finger.webp">
            <option value="img/school_events/masturbate.webp">
            <option value="img/school_events/out_cold.webp">
            <option value="img/school_events/out_cold_blur.webp">
            <option value="img/school_events/peek_hole.webp">
            <option value="img/school_events/plug_masturbate.webp">
            <option value="img/school_events/random_piss.webp">
            <option value="img/school_events/roof_pie.webp">
            <option value="img/school_events/roof_pie1.webp">
            <option value="img/school_events/roof_pie2.webp">
            <option value="img/school_events/roof_pie_cum.webp">
            <option value="img/school_events/roof_pie_eat.webp">
            <option value="img/school_events/shower_peek.webp">
            <option value="img/school_events/shower_solo1.webp">
            <option value="img/school_events/shower_solo2.webp">
            <option value="img/school_events/squat1.webp">
            <option value="img/school_events/squat2.webp">
            <option value="img/school_events/squat3.webp">
            <option value="img/school_events/wc_pee0.webp">
            <option value="img/school_events/wc_pee1.webp">
            <option value="img/school_events/wc_pee2.webp">
            <option value="img/school_events/wc_post_pee.webp">
            <option value="img/school_events/wc_pre_pee.webp">
            <option value="img/shop_events/changing_room.webp">
            <option value="img/shop_events/dildo_lick.webp">
            <option value="img/shop_events/dildo_lick2.webp">
            <option value="img/shop_events/dildo_pussy1.webp">
            <option value="img/shop_events/dildo_pussy2.webp">
            <option value="img/shop_events/janitor_anal.webp">
            <option value="img/shop_events/janitor_anal_cum.webp">
            <option value="img/shop_events/janitor_bj.webp">
            <option value="img/shop_events/janitor_bj_cum.webp">
            <option value="img/shop_events/mall_back_corridor.webp">
            <option value="img/shop_events/photo_set.webp">
            <option value="img/shop_events/sexshop_dildo.webp">
            <option value="img/skymeme/loading.webp">
            <option value="img/skymeme/merge.webp">
            <option value="img/skymeme/wagon.webp">
            <option value="img/spa/1h_later.webp">
            <option value="img/spa/bimbo_preview_1.webp">
            <option value="img/spa/bimbo_preview_2.webp">
            <option value="img/spa/bimbo_preview_3.webp">
            <option value="img/spa/bimbo_preview_4.webp">
            <option value="img/spa/bimbo_preview_5.webp">
            <option value="img/spa/bj.webp">
            <option value="img/spa/corridor_day.webp">
            <option value="img/spa/corridor_night.webp">
            <option value="img/spa/massage_0.webp">
            <option value="img/spa/massage_1.webp">
            <option value="img/spa/massage_2.webp">
            <option value="img/spa/massage_3.webp">
            <option value="img/spa/massage_4.webp">
            <option value="img/spa/massage_boobs.webp">
            <option value="img/spa/massage_feet.webp">
            <option value="img/spa/massage_legs.webp">
            <option value="img/spa/massage_pussy.webp">
            <option value="img/spa/massage_uncover.webp">
            <option value="img/spa/rig.webp">
            <option value="img/spa/scan.webp">
            <option value="img/spa/spa_entry.webp">
            <option value="img/spa/spa_room.webp">
            <option value="img/spa/spring.webp">
            <option value="img/spa/spring2.webp">
            <option value="img/spa/spring2_night.webp">
            <option value="img/spa/spring_back.webp">
            <option value="img/spa/spring_back_hand.webp">
            <option value="img/spa/spring_dip.webp">
            <option value="img/spa/spring_front.webp">
            <option value="img/spa/spring_full.webp">
            <option value="img/spa/spring_night.webp">
            <option value="img/spa/spring_night_full.webp">
            <option value="img/spa/spring_shy.webp">
            <option value="img/spa/stone_shelf.webp">
            <option value="img/spa/work_station_1.webp">
            <option value="img/studio/bonus_bj.webp">
            <option value="img/studio/bonus_bj_cum.webp">
            <option value="img/studio/bonus_finger.webp">
            <option value="img/studio/bonus_shoot_1.webp">
            <option value="img/studio/bonus_shoot_2.webp">
            <option value="img/studio/bonus_shoot_3.webp">
            <option value="img/studio/inside_tent.webp">
            <option value="img/studio/limo_van.webp">
            <option value="img/studio/models.webp">
            <option value="img/studio/models_paint.webp">
            <option value="img/studio/models_paint2.webp">
            <option value="img/studio/models_wet.webp">
            <option value="img/studio/shoot_other.webp">
            <option value="img/studio/street_fair.webp">
            <option value="img/studio/street_fair_bg.webp">
            <option value="img/studio/street_fair_rain.webp">
            <option value="img/studio/street_fair_rain_bg.webp">
            <option value="img/studio/street_fair_tents_rain.webp">
            <option value="img/studio/street_fair_tents_rain_empty.webp">
            <option value="img/studio/street_rain.webp">
            <option value="img/studio/studio.webp">
            <option value="img/studio/studio_front.webp">
            <option value="img/studio/studio_front_night.webp">
            <option value="img/title/title.webp">
            <option value="img/title/title_alt.webp">
            <option value="img/title/title_blank.webp">
            <option value="img/title/title_bugs.webp">
            <option value="img/title/title_dunce.webp">
            <option value="img/title/title_free.webp">
            <option value="img/title/title_keys_1.webp">
            <option value="img/title/title_old.webp">
            <option value="img/title/title_thx.webp">
            <option value="img/title/title_tut_end.webp">
            <option value="img/title/xmas2022.webp">
            <option value="img/tracks/back.webp">
            <option value="img/tracks/back_sunset.webp">
            <option value="img/tracks/front.webp">
            <option value="img/tracks/hill.webp">
            <option value="img/tracks/hill2.webp">
            <option value="img/tracks/trip.webp">
            <option value="img/weekend/kiss.webp">
            <option value="img/weekend/train_in_1.webp">
            <option value="img/weekend/train_in_2.webp">
            <option value="img/weekend/train_out_1.webp">
            <option value="img/weekend/train_out_2.webp">
            <option value="img/weekend/zuza.webp">
            <option value="img/xmas/santa_fuck1.webp">
            <option value="img/xmas/santa_fuck2.webp">
            <option value="img/xmas/santa_fuck3.webp">
            <option value="img/xmas/santa_fuck3_cum.webp">
            <option value="img/xmas/shop_back.webp">
        </datalist>
        <datalist id="npcs">
            <option value="img/npc/.webp">
            <option value="img/npc/actor_1.webp">
            <option value="img/npc/actor_2.webp">
            <option value="img/npc/actor_3.webp">
            <option value="img/npc/actor_4.webp">
            <option value="img/npc/april.webp">
            <option value="img/npc/barkeep.webp">
            <option value="img/npc/bb.webp">
            <option value="img/npc/bb_casual.webp">
            <option value="img/npc/beach_boy1.webp">
            <option value="img/npc/beach_boy2.webp">
            <option value="img/npc/beach_cop.webp">
            <option value="img/npc/beach_dad.webp">
            <option value="img/npc/beach_girl.webp">
            <option value="img/npc/ben.webp">
            <option value="img/npc/ben_b.webp">
            <option value="img/npc/big_top.webp">
            <option value="img/npc/blur_ben.webp">
            <option value="img/npc/bob.webp">
            <option value="img/npc/boss_girl.webp">
            <option value="img/npc/bouncer.webp">
            <option value="img/npc/buff_santa.webp">
            <option value="img/npc/bum.webp">
            <option value="img/npc/bum1.webp">
            <option value="img/npc/butler.webp">
            <option value="img/npc/camera_man.webp">
            <option value="img/npc/chad.webp">
            <option value="img/npc/chad_jock.webp">
            <option value="img/npc/chemist.webp">
            <option value="img/npc/cop.webp">
            <option value="img/npc/cris.webp">
            <option value="img/npc/delivery_guy.webp">
            <option value="img/npc/delivery_guy2.webp">
            <option value="img/npc/delivery_guy2b.webp">
            <option value="img/npc/delivery_guy2c.webp">
            <option value="img/npc/delivery_guy2d.webp">
            <option value="img/npc/diego.webp">
            <option value="img/npc/enforcer.webp">
            <option value="img/npc/fat_mom.webp">
            <option value="img/npc/fat_student.webp">
            <option value="img/npc/fisher.webp">
            <option value="img/npc/fisher_a.webp">
            <option value="img/npc/furry.webp">
            <option value="img/npc/furry2.webp">
            <option value="img/npc/furry3.webp">
            <option value="img/npc/gabie.webp">
            <option value="img/npc/gabie_cosplay.webp">
            <option value="img/npc/gabie_cosplay_topless.webp">
            <option value="img/npc/gabie_expo1.webp">
            <option value="img/npc/gabie_expo2.webp">
            <option value="img/npc/gabie_nude.webp">
            <option value="img/npc/gabie_topless.webp">
            <option value="img/npc/gecko.webp">
            <option value="img/npc/generic_fem_nude.webp">
            <option value="img/npc/generic_nerd.webp">
            <option value="img/npc/generic_nerd2.webp">
            <option value="img/npc/generic_student.webp">
            <option value="img/npc/generic_student2.webp">
            <option value="img/npc/generic_student3.webp">
            <option value="img/npc/generic_student4.webp">
            <option value="img/npc/generic_student_fem.webp">
            <option value="img/npc/generic_student_fem2.webp">
            <option value="img/npc/head.webp">
            <option value="img/npc/head_blur.webp">
            <option value="img/npc/hooker1.webp">
            <option value="img/npc/hooker2.webp">
            <option value="img/npc/hostess.webp">
            <option value="img/npc/houghton.webp">
            <option value="img/npc/inspector.webp">
            <option value="img/npc/jack.webp">
            <option value="img/npc/janitor.webp">
            <option value="img/npc/jeff.webp">
            <option value="img/npc/jeff_nude.webp">
            <option value="img/npc/karen.webp">
            <option value="img/npc/katie_bikini.webp">
            <option value="img/npc/katie_bottom.webp">
            <option value="img/npc/katie_dress.webp">
            <option value="img/npc/katie_nude.webp">
            <option value="img/npc/katie_top.webp">
            <option value="img/npc/kido.webp">
            <option value="img/npc/kido2.webp">
            <option value="img/npc/kido_b.webp">
            <option value="img/npc/laura.webp">
            <option value="img/npc/ldad.webp">
            <option value="img/npc/lenard.webp">
            <option value="img/npc/lifeguard.webp">
            <option value="img/npc/lmum.webp">
            <option value="img/npc/mac.webp">
            <option value="img/npc/maid.webp">
            <option value="img/npc/maid2.webp">
            <option value="img/npc/maid3.webp">
            <option value="img/npc/mc_boss.webp">
            <option value="img/npc/miss_kitty.webp">
            <option value="img/npc/miss_kitty_xms.webp">
            <option value="img/npc/mob_boss.webp">
            <option value="img/npc/mum.webp">
            <option value="img/npc/mum_nude.webp">
            <option value="img/npc/nerd.webp">
            <option value="img/npc/nerd_smoke.webp">
            <option value="img/npc/nerd_smoke2.webp">
            <option value="img/npc/none.webp">
            <option value="img/npc/novak.webp">
            <option value="img/npc/npc_1.webp">
            <option value="img/npc/npc_10.webp">
            <option value="img/npc/npc_11.webp">
            <option value="img/npc/npc_12.webp">
            <option value="img/npc/npc_13.webp">
            <option value="img/npc/npc_14.webp">
            <option value="img/npc/npc_15.webp">
            <option value="img/npc/npc_16.webp">
            <option value="img/npc/npc_2.webp">
            <option value="img/npc/npc_3.webp">
            <option value="img/npc/npc_4.webp">
            <option value="img/npc/npc_5.webp">
            <option value="img/npc/npc_6.webp">
            <option value="img/npc/npc_7.webp">
            <option value="img/npc/npc_8.webp">
            <option value="img/npc/npc_9.webp">
            <option value="img/npc/nude_adam.webp">
            <option value="img/npc/nude_anna.webp">
            <option value="img/npc/nude_anna_base.webp">
            <option value="img/npc/nude_daniel.webp">
            <option value="img/npc/nude_daniel2.webp">
            <option value="img/npc/nude_emma.webp">
            <option value="img/npc/nude_joe.webp">
            <option value="img/npc/nude_sarah.webp">
            <option value="img/npc/nurse_hank.webp">
            <option value="img/npc/other_ben.webp">
            <option value="img/npc/pimp.webp">
            <option value="img/npc/porn_star.webp">
            <option value="img/npc/punk_f.webp">
            <option value="img/npc/pupper.webp">
            <option value="img/npc/rent_a_cop.webp">
            <option value="img/npc/santa.webp">
            <option value="img/npc/sarge.webp">
            <option value="img/npc/sarge_nude.webp">
            <option value="img/npc/sarge_nude_omega.webp">
            <option value="img/npc/sergei.webp">
            <option value="img/npc/spa_girl.webp">
            <option value="img/npc/spa_girl_nude.webp">
            <option value="img/npc/student_jock1.webp">
            <option value="img/npc/student_jock2.webp">
            <option value="img/npc/student_pod.webp">
            <option value="img/npc/student_shirtless.webp">
            <option value="img/npc/taissia.webp">
            <option value="img/npc/taissia_nude.webp">
            <option value="img/npc/thug1.webp">
            <option value="img/npc/tom.webp">
            <option value="img/npc/wanderer.webp">
            <option value="img/npc/wanderer2.webp">
            <option value="img/npc/wanderer3.webp">
            <option value="img/npc/wolfie.webp">
            <option value="img/npc/xms_girl1.webp">
            <option value="img/npc/xms_girl2.webp">
            <option value="img/npc/xms_girl3.webp">
            <option value="img/npc/zuza.webp">
            <option value="img/npc/zuza_angry_nude.webp">
            <option value="img/npc/zuza_bottomless.webp">
            <option value="img/npc/zuza_nude.webp">
            <option value="img/npc/zuza_nude_wet.webp">
        </datalist>
        <datalist id="cmds">
            <option value="count_clothes_by_tag(tag, eqquiped_only=False)">
            <option value="has_clothes_by_tag(tag, eqquiped_only=False)">
            <option value="set_quest('q_name', '')">
            <option value="show_error(txt, do_clear=False)">
            <option value="random()">
            <option value="remember_clothes()">
            <option value="restore_clothes()">
            <option value="has_equipped_tags()">
            <option value="randint(start, stop=None)">
            <option value="random_choice(input_list, weights=None)">
            <option value="random_choice_adv(name, weights, static_weights_bonus=None)">
            <option value="chance(p)">
            <option value="d(sides, num=1)">
            <option value="open_url(url, new_tab=True)">
            <option value="get_weekday()">
            <option value="is_weekend()">
            <option value="get_datetime()">
            <option value="is_time_of_day(*time_of_day_list)">
            <option value="is_day()">
            <option value="get_day()">
            <option value="get_time_of_day()">
            <option value="get_day_name(future_day=0)">
            <option value="get_time_of_day_name()">
            <option value="set_time_of_day(time_of_day)">
            <option value="progress_time(1)">
            <option value="exec_once('progress_time(1)')">
            <option value="give_clothes_by_tag(tag)">
            <option value="strip_nude()">
            <option value="set_clothes(clothes_list)">
            <option value="set_clothes('')">
            <option value="change_clothes(tag_set=None, enforce_stats=1)">
            <option value="shop(shop_id=None, tag_set=None, enforce_stats=1, buyback=False)">
            <option value="is_exposed(test_expo, logic='any')">
            <option value="get_exposure()">
            <option value="set_bodypart_img(bodypart, img_path)">
            <option value="overlay_img(img_url=None, img_class='overlay_blend_screen', clear=True)">
            <option value="exec_once(cmd)">
            <option value="exec_once('save.slut+=1')">
            <option value="save.get_list(list_name)">
            <option value="save.del_from_list(list_name, value)">
            <option value="splash(rgba=(255,230,241,0.8), mode='screen', backdrop_filter='none', anim='fade_out')">
            <option value="splash((240, 240, 250, 1.0), time=700)">
            <option value="splash([190,90,90,0.5], 'normal', time=450)">
            <option value="svg_filter(filter_name='default')">
            <option value="svg_filter('default')">
            <option value="svg_filter('night')">
            <option value="parallax_imgs(img_list=None, scroll_dir='y')">
            <option value="init_new_save()">
            <option value="restore_last()">
            <option value="move_to(target)">
            <option value="show_map(poi_list=None, show_known=True)">
            <option value="show_map()">
            <option value="remove_map_event(target, from_poi=None, target_poi=None)">
            <option value="set_map_event(target, from_poi=None, target_poi=None)">
            <option value="play_music(url=None)">
            <option value="inventory.">
            <option value="inventory.add_item('')">
            <option value="inventory.clear()">
            <option value="save.">
            <option value="save.money">
            <option value="save.max_slut">
            <option value="add_poi('')">
            <option value="set_time_of_day(TIME.NIGHT)">
            <option value="set_time_of_day(TIME.MORNING)">
            <option value="set_time_of_day(TIME.NOON)">
            <option value="set_time_of_day(TIME.MIDDAY)">
            <option value="set_time_of_day(TIME.AFTERNOON)">
            <option value="set_time_of_day(TIME.EVENING)">
            <option value="progress_time(amount=1)">
            <option value="music('blank')">
            <option value="music('chill')">
            <option value="music('chill_guitar')">
            <option value="music('cool')">
            <option value="music('day')">
            <option value="music('funky')">
            <option value="music('lazy')">
            <option value="music('levelup')">
            <option value="music('like_the_synth')">
            <option value="music('lobby')">
            <option value="music('chipper_doodle')">
            <option value="music('sad')">
            <option value="music('sexytime')">
            <option value="music('swamp')">
            <option value="music('tbc')">
            <option value="music('roundabout')">
            <option value="music('lilac')">
            <option value="music('vampire')">
            <option value="music('disco')">
            <option value="music('oh_my')">
            <option value="music('know_myself')">
            <option value="music('dorris_day')">
            <option value="music('record_scratch')">
            <option value="music('prisoner')">
            <option value="music('dream')">
            <option value="music('hl')">
            <option value="music('groundhog')">
            <option value="music('decay')">
            <option value="music('electric_zoo')">
            <option value="music('love_not_war')">
            <option value="music('black_night')">
            <option value="music('club1')">
            <option value="music('club2')">
            <option value="counter_inc('name')">
            <option value="counter_get('name')">
            <option value="set_bodypart_img('pc_img_nude','img/pc/...')">
            <option value="set_body_overlay('')">
            <option value="parallax_imgs('img/big/anal_cream.webp')">
            <option value="parallax_imgs('img/big/anal_cream_clean.webp')">
            <option value="parallax_imgs('img/big/at_door.webp')">
            <option value="parallax_imgs('img/big/back.webp')">
            <option value="parallax_imgs('img/big/back_hit1.webp')">
            <option value="parallax_imgs('img/big/back_hit2.webp')">
            <option value="parallax_imgs('img/big/back_hit3.webp')">
            <option value="parallax_imgs('img/big/back_wet.webp')">
            <option value="parallax_imgs('img/big/back_wet_hit1.webp')">
            <option value="parallax_imgs('img/big/back_wet_hit2.webp')">
            <option value="parallax_imgs('img/big/back_wet_hit3.webp')">
            <option value="parallax_imgs('img/big/bath_end.webp')">
            <option value="parallax_imgs('img/big/bbc_anal.webp')">
            <option value="parallax_imgs('img/big/beach_expo.webp')">
            <option value="parallax_imgs('img/big/beach_oiled.webp')">
            <option value="parallax_imgs('img/big/beach_sleep.webp')">
            <option value="parallax_imgs('img/big/blue_coat_sit.webp')">
            <option value="parallax_imgs('img/big/boob_inspect.webp')">
            <option value="parallax_imgs('img/big/captive.webp')">
            <option value="parallax_imgs('img/big/captive2_dusk.webp')">
            <option value="parallax_imgs('img/big/captive2_night.webp')">
            <option value="parallax_imgs('img/big/captive_free_night.webp')">
            <option value="parallax_imgs('img/big/clean_window.webp')">
            <option value="parallax_imgs('img/big/clean_window_night.webp')">
            <option value="parallax_imgs('img/big/cum_in_mouth.webp')">
            <option value="parallax_imgs('img/big/d14_punish_1.webp')">
            <option value="parallax_imgs('img/big/d14_punish_2.webp')">
            <option value="parallax_imgs('img/big/d14_punish_3.webp')">
            <option value="parallax_imgs('img/big/d14_punish_4.webp')">
            <option value="parallax_imgs('img/big/dry_window.webp')">
            <option value="parallax_imgs('img/big/facial.webp')">
            <option value="parallax_imgs('img/big/ffm_cum.webp')">
            <option value="parallax_imgs('img/big/lazy.webp')">
            <option value="parallax_imgs('img/big/lazy2.webp')">
            <option value="parallax_imgs('img/big/night_walk.webp')">
            <option value="parallax_imgs('img/big/nude_at_door.webp')">
            <option value="parallax_imgs('img/big/nude_locker.webp')">
            <option value="parallax_imgs('img/big/onbed.webp')">
            <option value="parallax_imgs('img/big/panties_thief_black.webp')">
            <option value="parallax_imgs('img/big/panties_thief_pink.webp')">
            <option value="parallax_imgs('img/big/panties_thief_white.webp')">
            <option value="parallax_imgs('img/big/park_stockings.webp')">
            <option value="parallax_imgs('img/big/park_wait.webp')">
            <option value="parallax_imgs('img/big/park_woods1.webp')">
            <option value="parallax_imgs('img/big/park_woods2.webp')">
            <option value="parallax_imgs('img/big/pee.webp')">
            <option value="parallax_imgs('img/big/photo_1_1.webp')">
            <option value="parallax_imgs('img/big/photo_1_2.webp')">
            <option value="parallax_imgs('img/big/photo_1_3.webp')">
            <option value="parallax_imgs('img/big/photo_1_4.webp')">
            <option value="parallax_imgs('img/big/photo_1_5.webp')">
            <option value="parallax_imgs('img/big/photo_1_6.webp')">
            <option value="parallax_imgs('img/big/photo_1_7.webp')">
            <option value="parallax_imgs('img/big/photo_1_8.webp')">
            <option value="parallax_imgs('img/big/photo_1_9.webp')">
            <option value="parallax_imgs('img/big/photo_pose_1.webp')">
            <option value="parallax_imgs('img/big/photo_pose_2.webp')">
            <option value="parallax_imgs('img/big/photo_pose_3.webp')">
            <option value="parallax_imgs('img/big/photo_pose_4.webp')">
            <option value="parallax_imgs('img/big/plug_inspect.webp')">
            <option value="parallax_imgs('img/big/plug_inspect_cum.webp')">
            <option value="parallax_imgs('img/big/plug_inspect_gape.webp')">
            <option value="parallax_imgs('img/big/pose_ass_kitchen.webp')">
            <option value="parallax_imgs('img/big/pose_ass_kitchen_milk.webp')">
            <option value="parallax_imgs('img/big/remove_panties.webp')">
            <option value="parallax_imgs('img/big/sleep.webp')">
            <option value="parallax_imgs('img/big/sleep_dark.webp')">
            <option value="parallax_imgs('img/big/spook1.xxx')">
            <option value="parallax_imgs('img/big/spook2.xxx')">
            <option value="parallax_imgs('img/big/stand_nude.webp')">
            <option value="parallax_imgs('img/big/stand_nude2.webp')">
            <option value="parallax_imgs('img/big/stand_shame.webp')">
            <option value="parallax_imgs('img/big/stand_shame_wet.webp')">
            <option value="parallax_imgs('img/big/strip_vip.webp')">
            <option value="parallax_imgs('img/big/tracks.webp')">
            <option value="parallax_imgs('img/big/use_dildo.webp')">
            <option value="parallax_imgs('img/big/vip_bj.webp')">
            <option value="parallax_imgs('img/big/vip_facial.webp')">
            <option value="parallax_imgs('img/big/wc_fuck1.webp')">
            <option value="parallax_imgs('img/big/wc_fuck2.webp')">
            <option value="parallax_imgs('img/big/wet_window.webp')">
            <option value="parallax_imgs('img/big/zuza_x_jeff1.webp')">
        </datalist>
        </form>
        <script type="text/python">
        from browser import document, bind, html
        from browser import window as data
        from browser import svg
        from browser import timer
        from javascript import JSON
        from javascript import Date
        from javascript import Math
        from javascript import RegExp
        from javascript import String
        
        class dotdict(dict):
            __getattr__ = dict.get
            __setattr__ = dict.__setitem__
            __delattr__ = dict.__delitem__

        color_names = ('sandybrown', 'mediumseagreen', 'gold', 'peru',
                       'steelblue', 'mediumslateblue', 'navy', 'cyan',
                       'darkmagenta', 'lightgreen', 'deeppink',
                       'limegreen', 'coral', 'palevioletred', 'turquoise',
                        'mediumpurple', 'green', 'darkcyan','hotpink',
                       'darkslateblue', 'salmon','olive', 'cornflowerblue',
                       'deepskyblue', 'chocolate', 'blueviolet', 'dodgerblue',
                       'springgreen', 'darksalmon', 'aqua', 'chartreuse',
                       'mediumblue', 'darkorchid', 'mediumaquamarine',
                       'darkgoldenrod', 'orchid', 'teal', 'palegreen', 'midnightblue',
                       'lightsalmon', 'darkgreen', 'lawngreen',
                       'sienna', 'slateblue', 'greenyellow', 'mediumvioletred',
                       'saddlebrown', 'lime', 'goldenrod', 'darkolivegreen',
                       'forestgreen', 'mediumorchid', 'tan', 'yellowgreen',
                       'royalblue', 'cadetblue', 'darkturquoise', 'brown',
                       'darkorange', 'blue', 'mediumspringgreen', 'darkviolet',
                       'orange', 'mediumturquoise', 'indigo', 'purple', 'burlywood',
                       'indianred', 'seagreen', 'darkseagreen', 'powderblue',
                       'darkblue', 'violet', 'maroon', 'olivedrab')

        def get_color(name, colors):
            ''' Get the color of a node
                TODO: fix this!
            '''
            global node_colors
            if 'node_colors' in globals():
                if name in node_colors:
                    return node_colors[name]

            global color_idx
            if 'color_idx' in globals():
                color_idx+=1
            else:
                color_idx = 0
            if color_idx >= len(colors):
                color_idx=0
            return colors[color_idx]

            #v = sum([i for i in name.encode()]) % len(colors)
            #return colors[v]

        def log(*args):
            '''print the args to the py_output text area '''
            if args:
                if len(args) == 1:
                    document['py_output'].value += str(args[0]) +'\n'
                elif len(args) > 1:
                    document['py_output'].value += ' '.join( (str(i) for i in args) ) +'\n'

        def find_quests():
            global plot
            quests={}
            for name, node in plot.items():
                if 'cmd' in node:
                    for cmd in node['cmd']:
                        if 'set_quest' in cmd:
                            unpacked_quest = [i.replace("'", '').replace('"','').strip() for i in cmd.strip()[10:-1].split(",")]
                            q_name = ''
                            q_val = ''
                            if unpacked_quest:
                                q_name = unpacked_quest[0]
                                if len(unpacked_quest)>1:
                                    q_val = unpacked_quest[1]
                            if q_name in quests:
                                quests[q_name].append((name, q_val))
                            else:
                                quests[q_name]=[(name, q_val)]
            document['quests'].clear()
            for k, v in quests.items():
                document['quests'].appendChild(html.H2(k))
                table = html.TABLE(Class='save_vars_table')
                for node_name, txt in v:
                    row = html.TR(Class='save_vars_row')
                    row.appendChild(html.TD(node_name, Class='save_vars'))
                    row.appendChild(html.TD(txt, Class='save_vars'))
                    table.appendChild(row)
                document['quests'].appendChild(table)

        def _find_save_values(input_string):
            '''Helper function to find all used save. vars '''
            if 'save.' in input_string:
                start_idx = input_string.find('save.')
                input_string = input_string[start_idx:]
                if ' ' in input_string:
                    end_idx = input_string.find(' ')
                    input_string = input_string[:end_idx]
                if '+' in input_string:
                    end_idx = input_string.find('+')
                    input_string = input_string[:end_idx]
                if '-' in input_string:
                    end_idx = input_string.find('-')
                    input_string = input_string[:end_idx]
                if '*' in input_string:
                    end_idx = input_string.find('-')
                    input_string = input_string[:end_idx]
                if '=' in input_string:
                    end_idx = input_string.find('=')
                    input_string = input_string[:end_idx]
                #if '(' in input_string or ')' in input_string:
                #    return ''
                return input_string[5:]
            return ''

        def list_voices():
            voices=set()
            global plot
            for name, node in plot.items():
                if 'txt' in node:
                    txt = node['txt']
                    speaker = txt.splitlines()[0].strip()
                    if speaker.endswith(':'):
                        speaker=''.join((l for l in speaker.lower() if l in 'abcdefghijklmnopqrstuvwxyz123456789'))
                        voices.add(speaker)
            return list(voices)

        def find_save_vars():
            document['save_vars'].clear()
            save_names = {}
            global plot
            for name, node in plot.items():
                if 'cmd' in node:
                    for cmd in node['cmd']:
                        if 'save' in cmd:
                            save_name = _find_save_values(cmd)
                            if save_name in save_names:
                                save_names[save_name].append((name, cmd))
                            else:
                                save_names[save_name] = [(name, cmd)]

            for k, v in save_names.items():
                document['save_vars'].appendChild(html.H2(k))
                table = html.TABLE(Class='save_vars_table')
                for name, cmd in v:
                    row = html.TR(Class='save_vars_row')
                    row.appendChild(html.TD(name, Class='save_vars'))
                    row.appendChild(html.TD(cmd, Class='save_vars'))
                    table.appendChild(row)
                document['save_vars'].appendChild(table)


        @bind(document["exec_button"], 'click')
        def exec_script(event=None):
            ''' Exec the source from py_intput text area
            '''
            source_script = document['py_intput'].value
            try:
                exec(source_script)
            except Exception as e:
                log(f'Exec error: {e}')


        @bind(document["search_button"], 'click')
        def find_nodes(event=None):
            ''' Make a dropdown list of nodes that pass the filter test
            '''
            filter_cmd = document['search_input'].value
            document["find_select"].unbind('input', draw_from_filtered)
            document["find_select"].clear()
            document["find_select"].appendChild(html.OPTION(' ', value=''))
            global plot
            for name, node in plot.items():
                l=locals().copy()
                l['node']=node
                for k in node:
                    l[k]=node[k]
                try:
                    if eval(filter_cmd, l):
                        document["find_select"].appendChild(html.OPTION(name, value=name))
                except Exception:
                    pass
            document["find_select"].bind('input', draw_from_filtered)


        def highlight_subnode(node_name, level, color):
            ''' Draw highlight for nodes descendants
            '''
            level-=1

            if 'node_selected' != document['_details_'+node_name].parent.className:
                document['_details_'+node_name].parent.className = 'node_selected'
                #color = get_color(node_name, color_names)
                if level>2:
                    document['_details_'+node_name].parent.style = {'box-shadow': '0 0 1px '+str(level)+'px '+color, 'opacity':'0.95'}
                else:
                    document['_details_'+node_name].parent.style = {'box-shadow': '0 0 1px 2px '+color, 'opacity':'0.95'}

                global current_nodes
                if node_name in current_nodes:
                    if current_nodes[node_name]:
                        for target in current_nodes[node_name]:
                            highlight_subnode(target, level, color)
                    else:
                        document['_details_'+node_name].parent.className = 'node_selected'
                        document['_details_'+node_name].parent.style = {'box-shadow': '0 0 0 5px red', 'opacity':'0.95'}


        def highlight_node(node_name):
            for el in document.select('.node_selected'):
                el.className = 'node'
                el.style={'box-shadow':'', 'opacity':''}
            #color = get_color(node_name, color_names)
            #document['_details_'+node_name].parent.className = 'node_selected'
            #document['_details_'+node_name].parent.style = {'box-shadow': '0 0 30px 15px '+color}
            color = 'magenta'
            highlight_subnode(node_name, 9, color)
            document['_details_'+node_name].parent.style = {'box-shadow': '0 0 1px 7px '+color,
                                                            'opacity':'0.95' }

            # parent nodes
            global current_nodes
            for nn, targets in current_nodes.items():
                if node_name in targets:
                    if '_details_'+nn in document:
                        document['_details_'+nn].parent.className = 'node_selected'
                        document['_details_'+nn].parent.style = {'box-shadow': '0 0 2px 7px rgba(255,255,255,0.9)', 'opacity':'0.95'}


        def show_details(event, node_name=None):
            # performance testing
            #__start_time = data.performance.now()

            if event:
                node_name = event.target.id[9:]
            global plot
            if node_name in plot:
                # highlight selecte
                highlight_node(node_name)
                # name
                document['node_name'].value = node_name
                document['node_edit_root'].text = node_name

                # guess node type
                toggle_node_type(None, 'radio_normal')

                # text
                if  'txt' in plot[node_name]:
                    document['txt'].value = plot[node_name]['txt']
                    document["radio_normal"].checked = True                    
                else:
                    document['txt'].value = ''

                # next node
                if  'next' in plot[node_name]:
                    document['next'].value = plot[node_name]['next']
                    toggle_node_type(None, 'radio_normal')
                else:
                    document['next'].value = ''

                # no save
                if  'no_save' in plot[node_name]:
                    if plot[node_name]['no_save'] in (1, '1', True, 'true'):
                        document['save'].checked = False
                    else:
                        document['save'].checked = True
                else: # default = make save
                    document['save'].checked = True

                # eval jump to
                if  'eval_jump_to' in plot[node_name]:
                    toggle_node_type(None, 'radio_jump')
                    document["radio_jump"].checked = True
                    document['eval_jump_to'].value = plot[node_name]['eval_jump_to']
                    document['eval_jump_to'].parent.open = True
                    toggle_node_type(None, 'radio_jump')
                else:
                    document['eval_jump_to'].value = ''
                    document['eval_jump_to'].parent.open = False
                # choices
                for i in range(8):
                    document['choice_condition_'+str(i)].value = ''
                    document['choice_label_'+str(i)].value = ''
                    document['choice_target_'+str(i)].value = ''
                if  'choice' in plot[node_name]:
                    document['choice'].open = True
                    for i, (condition, label, target) in enumerate(plot[node_name]['choice']):
                        document['choice_condition_'+str(i)].value = condition
                        document['choice_label_'+str(i)].value = label
                        document['choice_target_'+str(i)].value = target
                    toggle_node_type(None, 'radio_choice')
                else:
                    document['choice'].open = False

                # branch
                document['branch'].clear()
                if  'branch' in plot[node_name]:
                    toggle_node_type(None, 'radio_branch')
                    document["radio_branch"].checked = True
                    document['branch'].parent.open = True
                    for i, (condition, target) in enumerate(plot[node_name]['branch']):
                        document['branch'] <= 'if '
                        document['branch'] <= html.INPUT(value=condition, type="text", id="branch_condition_"+str(i), size="30", list='ifs')
                        document['branch'] <= chr(int('21b3', 16))+' '
                        html_input = html.INPUT(value=target, type="text", id="branch_target_"+str(i), size="30", list='nodes')
                        html_input.bind('drop', drop_on_input)
                        html_input.bind('dragover', allow_drop)
                        document['branch'] <= html_input
                        document['branch'] <= html.BR()
                    toggle_node_type(None, 'radio_branch')
                else:
                    document['branch'].parent.open = False

                # image
                if  'img' in plot[node_name]:
                    document['img'].value = plot[node_name]['img']
                    document['img_preview'].src = '../'+plot[node_name]['img']
                else:
                    document['img'].value = ''
                    document['img_preview'].src = '../img/blank.webp'

                # npc picture
                if  'npc' in plot[node_name]:
                    document['npc'].value = plot[node_name]['npc']
                    document['npc_preview'].src = '../'+plot[node_name]['npc']
                else:
                    document['npc'].value = ''
                    document['npc_preview'].src = '../img/npc/none.webp'

                # pc image/face/emote
                if  'pc' in plot[node_name]:
                    valid = ["", "last", "smile", "happy", "blush", "neutral", "upset", "shock","scripted"]
                    if plot[node_name]['pc'] in valid:
                        rank = valid.index(plot[node_name]['pc'])
                        document['pc'].options[rank].selected = True
                else:
                    document['pc'].options[0].selected = True

                # commands
                document['cmd'].clear()
                if  'cmd' in plot[node_name]:
                    document['cmd'].parent.open = True
                    for i, cmd in enumerate(plot[node_name]['cmd']):
                        document['cmd'] <= html.INPUT(value=cmd, type="text", id="cmd_"+str(i), size="60", list="cmds")
                        document['cmd'] <= html.BR()
                else:
                    document['cmd'].parent.open = False
                    
            # performance testing
            #__end_time = data.performance.now()
            #print(f'show_details() took {__end_time-__start_time} ms to execute.')

        @bind(document["add_branch"], 'click')
        def add_branch(event=None):
            i = 0
            while "branch_condition_"+str(i) in document:
                if not document["branch_condition_"+str(i)].value:
                    return
                i+=1
            document['branch'] <= 'if '
            document['branch'] <= html.INPUT(value='', type="text", id="branch_condition_"+str(i), size="30", list='ifs')
            document['branch'] <= chr(int('21b3', 16))+' '
            html_input = html.INPUT(value='', type="text", id="branch_target_"+str(i), size="30", list='nodes')
            html_input.bind('drop', drop_on_input)
            html_input.bind('dragover', allow_drop)
            document['branch'] <= html_input
            document['branch'] <= html.BR()

        def add_cmd(event=None):
            name = event.target.id
            i = 0
            while name+str(i) in document:
                if not document[name+str(i)].value:
                    return
                i+=1
            document[name[:-1]] <= html.INPUT(value='', type="text", id=name+str(i), size="60", list='cmds')
            document[name[:-1]] <= html.BR()

        def _do_remove_node(node_name, del_subplot=False):
            global current_nodes
            global plot
            if node_name in plot:
                if '_node_'+node_name in document:
                    document['_node_'+node_name].remove()
                if 'next' in plot[node_name]:
                    if del_subplot:
                        _do_remove_node(plot[node_name]['next'])
                    else:
                        return
                # check if the node is unconnected
                del_from_current = []
                for node, targets in current_nodes.items():
                    for target in targets:
                        if target == node_name:
                            # is it a 'next' node?
                            if 'next' in plot[node]:
                                if plot[node]['next'] == node_name:
                                    plot[node] = {k:plot[node][k] for k in plot[node] if k!='next'}
                            if 'choice' in plot[node]:
                                for i, choice in enumerate(plot[node]['choice']):
                                    if choice[2] == node_name:
                                        del plot[node]['choice'][i]
                            if 'branch' in plot[node]:
                                for i, branch in enumerate(plot[node]['branch']):
                                    if branch[1] == node_name:
                                         del plot[node]['branch'][i]
                            del_from_current.append(node)

                for n in del_from_current:
                    current_nodes[n] = [i for i in current_nodes[n] if i!= node_name]

                if node_name in plot:
                    del plot[node_name]
                if node_name in current_nodes:
                    del current_nodes[node_name]

        @bind(document["remove_all"], 'click')
        def remove_subplot(event=None):
            # get data
            node_name = document['node_name'].value
            if not node_name:
                return
            _do_remove_node(node_name, del_subplot=True)
            # re-draw graph
            re_draw()

        @bind(document["remove"], 'click')
        def remove_node(event=None):
            # get data
            node_name = document['node_name'].value
            if not node_name:
                return
            _do_remove_node(node_name)
            # re-draw graph
            re_draw()

        @bind(document["commit"], 'click')
        def write_node(event=None):
            # performance testing
            #__start_time = data.performance.now()
            data.not_saved = 1
            # get data
            node_name = str(document['node_name'].value).strip()
            if not node_name:
                return
            node_data ={
                        'next' : str(document['next'].value).strip(),
                        'pc' : document['pc'].options[document['pc'].selectedIndex].value,
                        'txt' : document['txt'].value,
                        'img': document['img'].value,
                        'npc': document['npc'].value,
                        'eval_jump_to': document['eval_jump_to'].value,
                        'no_save': int(not document['save'].checked),
                        'choice':[],
                        'branch':[],
                        'cmd':[]
                        }
            for i in range(8):
                condition = document['choice_condition_'+str(i)].value
                label = document['choice_label_'+str(i)].value
                target = str(document['choice_target_'+str(i)].value).strip()
                if condition and label and target:
                    node_data['choice'].append([condition, label, target])
            i = 0
            while 'branch_condition_'+str(i) in document:
                condition = document['branch_condition_'+str(i)].value
                target = str(document['branch_target_'+str(i)].value).strip()
                if condition and target:
                    node_data['branch'].append([condition, target])
                    node_data['next'] = ''
                    document['next'].value =''
                i+=1
            i = 0
            while "cmd_"+str(i) in document:
                cmd = document['cmd_'+str(i)].value
                if cmd:
                    node_data['cmd'].append(cmd)
                i+=1
            # update plot
            value = {k: v for k, v in node_data.items() if v not in ('', [])}
            global plot
            plot[node_name] = value
            global plot_mod
            plot_mod[node_name] = value

            # update nodes
            global current_nodes
            targets = []
            if 'next' in value:
                targets.append(value['next'])
            if 'choice' in value:
                for choice in value['choice']:
                    targets.append(choice[2])
            if 'branch' in value:
                for branch in value['branch']:
                    targets.append(branch[1])
            current_nodes[node_name] = targets

            # add missing dummy nodes
            for new_node in targets:
                if new_node not in current_nodes:
                    current_nodes[new_node] = []
                    plot[new_node] = {}
                    document['nodes'] <= html.OPTION(new_node)
            # fix node color
            # find direct parent
            global node_colors
            for parent_name, parent_targets in current_nodes.items():
                if node_name in parent_targets:
                    if parent_name in node_colors:
                        node_colors[node_name] = node_colors[parent_name]
                        break

            # update dropdown
            find_gaps(current_nodes)
            # re-draw graph
            re_draw()
            # update vars
            if node_data['cmd']:
                find_save_vars()
                find_quests()

            # performance testing
            #__end_time = data.performance.now()
            #print(f'write_node() took {__end_time-__start_time} ms to execute.')

        def find_gaps(nodes):
            '''Find nodes that no other node is pointing to '''
            dropdown = document['start_select']
            num = dropdown.selectedIndex
            if num > -1:
                last_selected = dropdown.options[num].value
            else:
                last_selected = None

            gaps = ['pre_new_game']
            used = set()
            for name, targets in nodes.items():
                for target in targets:
                    used.add(target)
            for name, targets in nodes.items():
                if name not in used:
                    gaps.append(name)
            #add to start_select dropdown
            dropdown.clear()
            dropdown <=html.OPTION('', value='', id='_node__none__')
            for node_name in sorted(gaps):
                if node_name == last_selected:
                    option = html.OPTION(node_name, value=node_name, id='_node_'+node_name, selected='selected')
                else:
                    option = html.OPTION(node_name, value=node_name, id='_node_'+node_name)
                dropdown <= option
            
        
        @bind(document['import_mod'], 'input')
        def import_mod(event=None):
            def _on_load(event):
                raw_mod_source = event.target.result
                g=dict()
                l = {'data': dotdict()}
                l['data'].plot = dict()
                try:
                    exec(raw_mod_source, g, l)
                except Exception as e:
                    print(e)
                print(l['data']['plot'])
                if l['data']['plot']:
                    plot_mod.update(l['data']['plot'])
                    plot.update(l['data']['plot'])
                    nodes ={}
                    for name, value in dict(l['data']['plot']).items():
                        document['nodes']<= html.OPTION(name)
                        if 'next' in value:
                            nodes[name] = [value['next']]
                        elif 'choice'in value:
                            targets = []
                            for choice in value['choice']:
                                targets.append(choice[2])
                            nodes[name] = targets
                        elif 'branch'in value:
                            targets = []
                            for branch in value['branch']:
                                targets.append(branch[1])
                            nodes[name] = targets
                        else:
                            nodes[name] = []
                    global current_nodes
                    current_nodes.update(nodes)
                    find_gaps(current_nodes)
                    re_draw()
            mod_file = document['import_mod'].files[0]
            # window is data
            reader = data.FileReader.new()
            reader.readAsText(mod_file)
            reader.bind('load', _on_load)

        def read_from_js():
            '''Create graph nodes from the plot.txt'''
            document['notes'].value = data.notes
            global plot
            plot = dict(data.plot)
            global plot_mod
            plot_mod = {}
            nodes={}
            actors = set()
            word_count = 0
            for name, value in plot.items():
                #if 'txt' in value:
                #    if value['txt']:
                #        word_count+= len(value['txt'].split())
                #        actor = value['txt'].splitlines()[0].strip()
                #        if actor.endswith(':'):
                #            actors.add(actor)
                # add to datalist
                document['nodes']<= html.OPTION(name)
                if 'next' in value:
                    nodes[name] = [value['next']]
                elif 'choice'in value:
                    targets = []
                    for choice in value['choice']:
                        targets.append(choice[2])
                    nodes[name] = targets
                elif 'branch'in value:
                    targets = []
                    for branch in value['branch']:
                        targets.append(branch[1])
                    nodes[name] = targets
                else:
                    nodes[name] = []
            #print(actors)
            #print(word_count)
            find_save_vars()
            find_quests()
            return nodes

        def _to_string(value, accum=None):
            if accum is None:
                accum =''
            if isinstance(value, (list, tuple)):
                accum+='['
                last=len(value)
                for i, n in enumerate(value):
                    accum = _to_string(n, accum)
                    if i < last-1:
                        accum+=', '
                accum+=']'
            elif isinstance(value, bool):
                if value:
                   accum+='true'
                else:
                    accum+='false'
            elif isinstance(value, (int, float)):
                accum+=str(value)
            else: #probably string
                # browsers strip newline characters, so we need to escape them
                out_string = str(value).replace('\n', '\\n')
                # escape the quotes, else nested quotes can be a problem
                out_string = out_string.replace('"', '\\"')
                out_string = out_string.replace("'", "\\'")
                accum+='"'+out_string+'"'
            return accum

        @bind(document["clone"], 'click')
        def clone_subplot(event=None):
            in_prefix = str(document['clone_input_prefix'].value).strip()
            in_input_name = str(document['clone_input_name'].value).strip()
            in_output_name = str(document['clone_output_name'].value).strip()
            in_node_name = str(document['node_name'].value).strip()
            in_end_nodes = str(document['clone_end_names'].value).strip()

            if in_node_name:
                if in_end_nodes:
                    end_nodes = in_end_nodes.replace(',','').replace(';', '').split()
                else:
                    end_nodes = None
                node_list = get_subplot(in_node_name, end_nodes)
                if in_prefix or (in_input_name and in_output_name):
                    clone_nodes_as(node_list, in_input_name, in_output_name, in_prefix)
                else:
                    print('Error - Cloning needs a prefix or replacement pattern!')
            else:
                print('Error - no node selected or node name is empty!')

        def clone_nodes_as(node_list, input_name, output_name, prefix=''):
            update_cmds = False
            for name in node_list:
                node_name = prefix+name.replace(input_name, output_name)
                global plot
                # copy.deepcopy adds 2.5MB to the script size, can't use it
                #value = deepcopy(dict(**plot[name]))
                val_json= JSON.stringify(plot[name])
                value = JSON.parse(val_json)

                if 'next' in value:
                    value['next'] = prefix+value['next'].replace(input_name, output_name)
                if 'choice' in value:
                    new_choice = []
                    for choice in value['choice']:
                        choice[2] = prefix+choice[2].replace(input_name, output_name)
                        new_choice.append(choice)
                    value['choice'] = new_choice
                if 'branch' in value:
                    new_branch = []
                    for branch in value['branch']:
                        branch[1] = prefix+branch[1].replace(input_name, output_name)
                        new_branch.append(branch)

                if 'cmd' in value and update_cmds == False:
                    if value['cmd']:
                        update_cmds = True

                print(node_name, value)

                plot[node_name] = value
                global plot_mod
                plot_mod[node_name] = value

                # update nodes
                global current_nodes
                targets = []
                if 'next' in value:
                    targets.append(value['next'])
                if 'choice' in value:
                    for choice in value['choice']:
                        targets.append(choice[2])
                if 'branch' in value:
                    for branch in value['branch']:
                        targets.append(branch[1])
                current_nodes[node_name] = targets

                # add missing dummy nodes
                for new_node in targets:
                    if new_node not in current_nodes:
                        current_nodes[new_node] = []
                        plot[new_node] = {}
                        document['nodes'] <= html.OPTION(new_node)

                # fix node color
                # find direct parent
                global node_colors
                for parent_name, parent_targets in current_nodes.items():
                    if node_name in parent_targets:
                        if parent_name in node_colors:
                            node_colors[node_name] = node_colors[parent_name]
                            break

            # update dropdown
            find_gaps(current_nodes)
            # re-draw graph
            re_draw()
            # update vars
            if update_cmds:
                find_save_vars()
                find_quests()


        def get_subplot(node_name, end_nodes=None, accumulator=None):
            if end_nodes is None:
                end_nodes = [node_name]
            if accumulator is None:
                accumulator = [node_name]

            global current_nodes
            if node_name in current_nodes:
                if current_nodes[node_name]:
                    for target in current_nodes[node_name]:
                        if target not in accumulator:
                            print('adding '+target)
                            accumulator.append(target)
                            if target not in end_nodes:
                                get_subplot(target, end_nodes, accumulator)
            return accumulator

        @bind(document["save_to_modfile"], 'mousedown')
        def write_to_modfile(event=None):
            global plot_mod
            if not plot_mod:
                return
            out_string = 'mod_plot = {%0D%0A'
            for key, node in plot_mod.items():
                out_string +=' '*4
                out_string +='"'+key+ '" : {%0D%0A'
                for node_key, value in dict(node).items():
                    if node_key != '__hashvalue__' and value:
                        out_string +=' '*8
                        out_string +='"'+node_key+ '" : '
                        out_string += _to_string(value)
                        out_string +=',%0D%0A'
                if out_string[-7:] == ',%0D%0A':
                    out_string = out_string[:-7] # remove newline and comma
                    out_string +='%0D%0A' #add back newline
                out_string +=' '*4
                out_string +='},%0D%0A'
            if out_string[-7:] == ',%0D%0A':
                out_string = out_string[:-7] # remove newline and comma
                out_string +='%0D%0A' #add back newline
            out_string +='} %0D%0A'
            out_string +='for k,v in mod_plot.items(): %0D%0A'
            out_string +='    data.plot[k] = v %0D%0A'
            document["save_to_modfile"].href = "data:text/plain," + out_string

        def _anti_lag_hack():
            document["save_to_file"].href = ""
            print('write_to_file() -> cleared link data')

        @bind(document["save_to_file"], 'mousedown')
        def write_to_file(event=None):
            print('write_to_file()')
            global plot
            date = Date.new()
            year = date.getFullYear()
            print('write_to_file() -> date done')
            out_string = '// Copyright '+str(year)
            out_string += ' Shark in a Hat. All Rights Reserved.%0D%0A'
            out_string += 'var notes = '+_to_string(document['notes'].value)+';%0D%0A'
            out_string += 'var plot='
            print('write_to_file() -> header done')

            #remove all the __hashvalue__ bloat
            # this is slower, but the end file is much smaller
            re = RegExp.new(r',"__hashvalue__":+\d+', 'g')
            out_string+= String.new(JSON.stringify(plot)).replaceAll(re, '')
            print('write_to_file() -> reg exp done')

            #out_string += JSON.stringify(plot)
            out_string +=' ;%0D%0A'
            document["save_to_file"].href = "data:text/plain," + out_string
            data.not_saved = 0
            print('write_to_file() -> all done')
            timer.set_timeout(_anti_lag_hack, 300)

        @bind(document["img"], 'input')
        def update_img(event):
            document['img_preview'].src = '../'+event.target.value

        @bind(document["npc"], 'input')
        def update_npc(event):
            document['npc_preview'].src = '../'+event.target.value

        def toggle_node_type(event=None, target=None):
            if event:
                target = event.target.id
            else:
                document[target].checked = True    
            if target == 'radio_branch':
                document['choice_node_fields'].style.display = 'none'
                document['normal_node_fields'].style.display = 'none'
                document['branch_node_fields'].style.display = ''
                document['jump_node_fields'].style.display = 'none'
                document['branch'].parent.open = True
            elif target == 'radio_choice':
                document['next_field'].style.display = 'none'
                document['choice_node_fields'].style.display = ''
                document['normal_node_fields'].style.display = ''
                document['branch_node_fields'].style.display = 'none'
                document['jump_node_fields'].style.display = 'none'
                document['branch'].parent.open = True
            elif target == 'radio_jump':
                document['choice_node_fields'].style.display = 'none'
                document['normal_node_fields'].style.display = 'none'
                document['branch_node_fields'].style.display = 'none'
                document['jump_node_fields'].style.display = ''
                document['eval_jump_to'].parent.open = True
            elif target == 'radio_normal':
                document['next_field'].style.display = ''
                document['choice_node_fields'].style.display = 'none'
                document['normal_node_fields'].style.display = ''
                document['branch_node_fields'].style.display = 'none'
                document['jump_node_fields'].style.display = 'none'

        def stop_drag(event=None):
            document.unbind('mouseup', stop_drag)
            document.unbind('mousemove', do_drag)
            document.unbind('touchend', stop_drag)
            document.unbind('touchmove', do_drag)

        def do_drag(event=None):
            global last_x
            global last_y 
            mX =0
            mY=0
            if hasattr(event, 'clientX'):
                mX = event.clientX;
                mY = event.clientY;
            else:
                mX = event.changedTouches[0].clientX
                mY = event.changedTouches[0].clientY            

            new_x = last_x - mX;
            new_y = last_y - mY;
            last_x = mX;
            last_y = mY;                        
            elmnt= document['side_panel']    
            elmnt.style.top = str(max(0, elmnt.offsetTop - new_y)) + "px";
            elmnt.style.left = str(elmnt.offsetLeft - new_x) + "px";
            document['cfg_top'].value = str(max(0, elmnt.offsetTop - new_y)) + "px";
            document['cfg_left'].value = str(elmnt.offsetLeft - new_x) + "px";

        @bind(document['node_edit_header'], 'touchstart')
        @bind(document['node_edit_header'], 'mousedown')
        def drag_side_panel(event):
            #print('click, start drag')
            global last_x 
            global last_y 
            mX =0
            mY=0
            if hasattr(event, 'clientX'):
                mX = event.clientX;
                mY = event.clientY;
            else:
                mX = event.changedTouches[0].clientX
                mY = event.changedTouches[0].clientY  

            last_x = mX;            
            last_y = mY;
            document.bind('mouseup', stop_drag)
            document.bind('mousemove', do_drag)

            document.bind('touchend', stop_drag)
            document.bind('touchmove', do_drag)
            

        def allow_drop(event):
            event.preventDefault()

        def drag(event):
            event.dataTransfer.setData("node", event.target.id);

        def drop_on_input(event):
            #event.preventDefault()
            data = event.dataTransfer.getData("node")
            if data:
                next_target = data[9:]
                event.target.value = next_target
                event.preventDefault()

        def drop_on_node(event):
            event.preventDefault()
            from_node = event.dataTransfer.getData("node")[9:]
            to_node = event.target.id[9:]
            if to_node == from_node:
                return
            global current_nodes
            if to_node not in current_nodes[from_node]:
                current_nodes[from_node].append(to_node)
                global plot
                if 'next' in plot[from_node]:
                    old_next = str(plot[from_node]['next'])
                    plot[from_node]['next'] =''
                    plot[from_node]['branch'] = [['True', old_next ], ['False', to_node]]
                elif 'branch' in plot[from_node]:
                    plot[from_node]['branch'].append(['False', to_node])
                else:
                    plot[from_node]['next'] = to_node
                re_draw()

        def get_hint(node_name):
            global plot
            if node_name in plot:
                if 'branch' in plot[node_name]:
                    if plot[node_name]['branch']:
                        return 'BRANCH...'
                if 'eval_jump_to' in plot[node_name]:
                    if plot[node_name]['eval_jump_to']:
                        return '>>> '+plot[node_name]['eval_jump_to'][:34]
                if 'txt' in plot[node_name]:
                    return plot[node_name]['txt'][:24]+'...'
            return '--EMPTY--'

        def name_plus_one(event=None):
            node_name = document['node_name'].value
            number = 0
            next_name = node_name+'_'
            try:
                number = int(node_name.split('_')[-1])
                next_name = '_'.join(node_name.split('_')[:-1])+'_'
            except:
                pass
            next_name += str(number+1)
            document['next'].value=next_name

        def color_flood(nodes, color, start_from, next_nodes):
            global plot
            global node_colors
            if 'node_colors' not in globals():
                node_colors = {}
            node_colors[start_from] = color

            # find the first node without a set color
            next_start = None
            for target in nodes[start_from]:
                if target not in node_colors and next_start is None:
                    node_colors[target] = color
                    next_start = target
                    #print(target)
                elif target not in next_nodes:
                    next_nodes.append(target)

            if next_start is None:
                #print(next_nodes)
                if next_nodes:
                    next_start=next_nodes.pop(0)
                    while next_start in node_colors:
                        if next_nodes:
                            next_start = next_nodes.pop(0)
                        else:
                            return

                    color = get_color(next_start, color_names)
                    #print('NEW COLOR for: '+next_start)
                    #print(next_nodes)
                else:
                    return
            color_flood(nodes, color, next_start, next_nodes)



        def make_row(rows, nodes):
            ''' Arrange the nodes in rows
            '''
            last_row = rows[-1]
            used = set()
            for row in rows:
                for i in row:
                    used.add(i)
            if last_row:
                next_row = set()
                for node in last_row:
                    if node:
                        for target in nodes[node]:
                            if target not in used:
                                next_row.add(target)
                next_row = tuple(next_row)
                if next_row not in rows:
                    rows.append(next_row)
                    make_row(rows, nodes)
                else:
                     return
            else:
                return

        def create_graph(nodes, start_from, unconnected=False):
            # we need a starting node so the first row is made by hand
            rows = [(start_from,)]
            # after that it runs recursive
            make_row(rows, nodes)
            #debug
            color_flood(nodes, get_color(start_from, color_names), start_from, [])
            if unconnected:
                # add special or unreachable nodes as well
                used = set()
                for row in rows:
                    for i in row:
                        used.add(i)
                # we also need to count connections to find hub nodes
                # a hub node is one that has over 5 nodes pointing to it
                # displaying all the lines is just a mess
                connections = {}
                hubs = []
                for name, value in nodes.items():
                    if name not in used:
                        rows.append((name,))
                        make_row(rows, nodes)
                        for row in rows:
                            for i in row:
                                used.add(i)
                    # count connections
                    for target in value:
                        if target in connections:
                            connections[target]+=1
                        else:
                            connections[target] = 1
                        if connections[target] > 9:
                            hubs.append(target)

            else:
                # just count connections to find hub nodes
                # a hub node is one that has over 5 nodes pointing to it
                # displaying all the lines is just a mess
                connections = {}
                hubs = []
                for name, value in nodes.items():
                    for target in value:
                        if target in connections:
                            connections[target]+=1
                        else:
                            connections[target] = 1
                        if connections[target] > 9:
                            hubs.append(target)

            # print it to the page
            html_nodes = {}
            for row in rows:
                if row:
                    table = html.TABLE()
                    table_row = html.TR()
                    for i, node_name in enumerate(row):
                        '''if (i+1)%10==0: # max nodes per row
                            table <= table_row
                            document['main_table'] <= table
                            table = html.TABLE()
                            table_row = html.TR()'''
                        color = get_color(node_name, color_names)
                        graph_node = html.DIV(Class='node', style={'border-color':color})
                        button = html.BUTTON('B',
                                             Class="node_button",
                                             type='button',
                                             id='_details_'+node_name,
                                             data_hint=get_hint(node_name),
                                             draggable="true")
                        button.bind('click', show_details)
                        button.bind('dragover', allow_drop)
                        button.bind('dragstart', drag)
                        button.bind('drop', drop_on_node)
                        graph_node <= button
                        global plot
                        graph_node <= node_name
                        graph_node <= html.BR()


                        if 'branch' in plot[node_name] and 'txt' in plot[node_name]:
                            graph_node <= html.SPAN(chr(int('f071', 16)),
                                                    Class='fa_icon',
                                                    data_hint='Text in branch node!')
                        if ('txt' not in plot[node_name] and
                           'branch' not in plot[node_name] and
                           'eval_jump_to' not in plot[node_name] and
                           'cmd' not in plot[node_name]):
                            graph_node <= html.SPAN(chr(int('f128', 16)),
                                                    Class='fa_icon',
                                                    data_hint='Empty node!')

                        if 'pc' in plot[node_name]:
                            graph_node <= html.SPAN(chr(int('f182', 16)),
                                                    Class='fa_icon',
                                                    data_hint=plot[node_name]['pc'])
                        if 'img' in plot[node_name]:
                            graph_node <= html.SPAN(chr(int('f03e', 16)),
                                                    Class='fa_icon',
                                                    data_hint=plot[node_name]['img'])

                        if 'npc' in plot[node_name]:
                            graph_node <= html.SPAN(chr(int('f007', 16)),
                                                    Class='fa_icon',
                                                    data_hint=plot[node_name]['npc'])
                        if 'cmd' in plot[node_name]:
                            for cmd in plot[node_name]['cmd']:
                                if 'music' in cmd:
                                   graph_node <= html.SPAN(chr(int('f001', 16)),
                                                    Class='fa_icon',
                                                    data_hint=cmd)
                                elif 'progress_time' in cmd or 'set_time_of_day' in cmd or 'set_hard_datetime' in cmd:
                                   graph_node <= html.SPAN(chr(int('f017', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'set_quest' in cmd:
                                    graph_node <= html.SPAN(chr(int('f129', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'show_map' in cmd:
                                    graph_node <= html.SPAN(chr(int('f277', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'clothes' in cmd:
                                    graph_node <= html.SPAN(chr(int('f553', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'splash' in cmd:
                                    graph_node <= html.SPAN(chr(int('f0e7', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'save.money' in cmd:
                                    graph_node <= html.SPAN(chr(int('f155', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'save.slut' in cmd or 'save.max_slut' in cmd:
                                    graph_node <= html.SPAN(chr(int('f004', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'save.food' in cmd or 'save.last_meal' in cmd:
                                    graph_node <= html.SPAN(chr(int('f2e7', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'save.pc_is_wet' in cmd:
                                    graph_node <= html.SPAN(chr(int('f043', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'save.' in cmd:
                                    graph_node <= html.SPAN(chr(int('f0c7', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'add_item' in cmd:
                                    graph_node <= html.SPAN(chr(int('f06b', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'parallax_imgs' in cmd:
                                    graph_node <= html.SPAN(chr(int('f302', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                elif 'overlay_img' in cmd:
                                    graph_node <= html.SPAN(chr(int('f5fd', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                                else:
                                    graph_node <= html.SPAN(chr(int('f013', 16)),
                                                            Class='fa_icon',
                                                            data_hint=cmd)
                        if 'eval_jump_to' in plot[node_name]:
                            graph_node <= html.SPAN(chr(int('f0c1', 16)),
                                                    Class='fa_icon',
                                                    data_hint=plot[node_name]['eval_jump_to'])
                        if 'choice' in plot[node_name]:
                            hint=''
                            for condition, label, target in plot[node_name]['choice']:
                                hint+='('+condition+')'+target+'\n'
                            graph_node <= html.SPAN(chr(int('f0e8', 16)),
                                                    Class='fa_icon',
                                                    data_hint=hint)
                        if 'branch' in plot[node_name]:
                            hint=''
                            for condition, target in plot[node_name]['branch']:
                                hint+='('+condition+')'+target+'\n'
                            graph_node <= html.SPAN(chr(int('f126', 16)),
                                                    Class='fa_icon',
                                                    data_hint=hint)

                        data_cell = html.TD(graph_node)
                        table_row <= data_cell
                        html_nodes[node_name] = graph_node
                    table <= table_row
                    document['main_table'] <= table

            #check the size of the tables and adjust the size of the svg canvas
            document['main_svg'].attrs['height'] = document['main_table'].height 
            document['main_svg'].attrs['width'] = document['main_table'].width 

            # draw line
            for name, targets in nodes.items():
                #print('draw line: '+name+'>'+str(targets))
                if name in html_nodes:
                    color = get_color(name, color_names)
                    # get pos of the node
                    o_element = html_nodes[name]
                    origin_x = o_element.abs_left + o_element.width//2
                    origin_y = o_element.abs_top +12
                    for i, target in enumerate(targets):
                        # hub nodes - too many connections
                        if target in hubs:
                            end_color = get_color(target, color_names)
                            line = svg.line(x1= str(origin_x),
                                            y1=str(origin_y),
                                            x2=str(origin_x),
                                            y2=str(origin_y +34),
                                            stroke = color,
                                            Class='_line_'+name,
                                            stroke_width="3",
                                            marker_end="url(#dot_"+end_color+")",
                                            shape_rendering="geometricPrecision")
                            document['lines'] <= line
                        elif target and target in html_nodes:
                            t_element = html_nodes[target]
                            target_x =  t_element.abs_left + t_element.width//3
                            target_y = t_element.abs_top
                            if target_y < origin_y:
                                target_x -= 20
                                target_y += t_element.height +30
                            line = svg.line(x1= str(origin_x),
                                            y1=str(origin_y),
                                            x2=str(target_x + int(Math.random()*60.0)),
                                            y2=str(target_y-25),
                                            #stroke='gray',
                                            stroke = color,
                                            Class='_line_'+name,
                                            stroke_width="3",
                                            marker_end="url(#head_"+color+")",
                                            shape_rendering="geometricPrecision")
                            document['lines'] <= line

        def curve(x0, y0, x1, y1):
            pass

        def draw_graph_from_current(event=None):
            document ["_node__none__"]. selected = 'selected'
            node_name = document['node_name'].value
            global last_redraw_node
            last_redraw_node = node_name
            global current_nodes
            document["main_table"].clear()
            document["lines"].clear()
            create_graph(current_nodes, node_name, False)

        def draw_from_filtered(event=None):
            document ["_node__none__"]. selected = 'selected'
            dropdown = document["find_select"]
            num = dropdown.selectedIndex
            node_name = dropdown.options[num].value

            global last_redraw_node
            last_redraw_node = node_name

            document["main_table"].clear()
            document["lines"].clear()

            global current_nodes
            if node_name in current_nodes:                
                create_graph(current_nodes, node_name, False)

        def re_draw(event=None):
            dropdown = document["start_select"]
            num = dropdown.selectedIndex
            node_name = dropdown.options[num].value
            #print('re_draw '+node_name)
            unconnected = document["unconnected"].checked

            global last_redraw_node
            if event is None:
                if 'last_redraw_node' in globals():
                    node_name = last_redraw_node

            document["main_table"].clear()
            document["lines"].clear()

            global current_nodes
            if node_name not in current_nodes:
                return            
            last_redraw_node = node_name
            create_graph(current_nodes, node_name, unconnected)
            
        #@bind(data.window, 'resize')
        def _on_resize(event=None):
            re_draw()
            
        # start here
        global current_nodes
        current_nodes = read_from_js()
        find_gaps(current_nodes)
        #create_graph(current_nodes, 'pre_new_game', False)
        document ["_node__none__"]. selected = 'selected'

        # bind events
        document["start_select"].bind('input', re_draw)
        document["unconnected"].bind('change', re_draw)
        document["next"].bind('dragover', allow_drop)
        document["next"].bind('drop', drop_on_input)
        document["cmd_"].bind('click', add_cmd)
        document["plus_one"].bind('click', name_plus_one)
        document["draw_from_current"].bind('click', draw_graph_from_current)

        document["radio_normal"].bind('input', toggle_node_type)
        document["radio_branch"].bind('input', toggle_node_type)
        document["radio_jump"].bind('input', toggle_node_type)
        document["radio_choice"].bind('input', toggle_node_type)
        
        for i in range(8):
            document['choice_target_'+str(i)].bind('drop', drop_on_input)
            document['choice_target_'+str(i)].bind('dragover', allow_drop)

        </script>
    </body>
</html>
